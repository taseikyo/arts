> @Author  : Lewis Tian (taseikyo@gmail.com)
>
> @Link    : github.com/taseikyo
>
> @Range   : 2020-11-22 - 2020-11-28

# Weekly #4

[readme](../README.md) | [previous](202011W3.md) | [next](202012W1.md)

![](../images/lala-azizli-OFZUaeYKP3k-unsplash.jpg "Books you should definitely read")

\**Photo by Lala Azizli on Unsplash*

## Table of Contents

- [algorithm](#algorithm-)
	- 134.加油站
- [review](#review-)
	- 哪种编程语言用电量最少？（英文）
- [tip](#tip-)
	- 从（无穷）可迭代对象中获取匹配条件的第一项（StackOverflow）
	- 搭建最简单的 Windows http web 服务器（中文）
	- git commit 格式正确书写方式（中文）
- [share](#share-)

## algorithm [⬆](#weekly-4)

### 1. [134.加油站](https://leetcode-cn.com/problems/gas-station/)

环路，N 个加油站，每个有汽油 gas[i] 升，从 i 到 i+1 消耗 cost[i]，初始油箱为 0（容量无限），问从哪点出发能绕一圈，否则返回 0。

这个 [题解](https://leetcode-cn.com/problems/gas-station/solution/shou-hua-tu-jie-liang-ge-guan-jian-jie-lun-de-jian/) 写的很清楚，只要总加油量比总耗油量大就一定有解，关键在于找到出发点。

![](../images/w4-algo-1.png)

上图中，若从 0 出发到 i 的剩余油量小于 0，那么 0 ~ i 都不能作为起点，类似地 i+1 ~ j 也不能，由于总剩余为正，那么必然有一段为正，图中 k 就为起点，后面一段能加到足够的油补充前面两段不足，从而绕一圈。

简单说明一下 0 ~ i 都不能作为起点的原因，比如 a-b-c-d，到 c 的时候剩余为负，此时我们能得到啥？

- 显然 a 是不能作为起点的：(gas[a]-cost[a])+(gas[b]-cost[b])+(gas[c]-cost[c])<0 => left(a)+left(b)+left(c)<0
- 由于过了 a，所以 left(a) >= 0 => left(b)+left(c)<0，所以 b 也做不了起点
- 同理能到 c 肯定过了 b，即，left(a)+left(b)>=0 => left(c)<0，所以 c 也做不了起点

> [code/leetcode_0134.go](../code/leetcode_0134.go)

```Golang
func canCompleteCircuit(gas []int, cost []int) int {
	left := 0
	start := 0
	totalGas, totalCost := 0, 0
	for i := 0; i < len(gas); i++ {
		totalGas += gas[i]
		totalCost += cost[i]
		left += gas[i] - cost[i]
		if left < 0 {
			start = i + 1
			left = 0
		}
	}
	if totalGas < totalCost {
		return -1
	}
	// 总加油>=总耗油，必然有解。当遍历结束时，最新的start指向成功的起点
	return start
}
```

## review [⬆](#weekly-4)

### 1. [哪种编程语言用电量最少？（英文）](https://thenewstack.io/which-programming-languages-use-the-least-electricity/)

很有趣的一篇文章，他们比较了 27 种编程语言的能耗、速度和内存情况。

可能我们的直觉来看编译型语言运行快，他们的能耗少，事实确实如此，但是没有一个语言能在三种情况中都居榜首，如下如所示，C 在内存方面被 Pascal 和 Go 打败了，这个我还挺奇怪的，我以为 C 会屠榜来着，但总的来说编译型快于虚拟机型快于解释型（图中 c 表示 compiled，i 表示 interpreted，v 表示 virtual machine）。

![](../images/w4-review-1.png)

## tip [⬆](#weekly-4)

### 1. [从（无穷）可迭代对象中获取匹配条件的第一项（StackOverflow）](https://stackoverflow.com/questions/2361426/get-the-first-item-from-an-iterable-that-matches-a-condition)

简单一点我们可以这样做：

```Python
def first(the_iterable, condition=lambda x: True):
	for i in the_iterable:
		if condition(i):
			return i

>>> first(range(10))
0
>>> first(range(10), lambda i: i > 3)
4
```

但其实我们可以使用内置的 next 函数完成这件事，并且可以设置默认值：

```Python
def first(the_iterable, condition=lambda x: True, default_value=0):
	return next((x for x in the_iterable if condition(x)), default_value)

>>> first(range(10))
0
>>> first(range(10), lambda i: i > 3)
4
>>> first(range(10), lambda i: i > 30, -1)
-1
```

### 2. [搭建最简单的 Windows http web 服务器（中文）](https://blog.csdn.net/Cinderella___/article/details/88697062)

[HFS ~ Http File Server](http://www.rejetto.com/hfs/?f=dl)，一个很小的可执行文件，双击运行即可。hfs 对于需要一个临时的 web 服务器是一个不错的选择。

![](../images/Snipaste_20201116_210823.png)

### 3. [git commit 格式正确书写方式（中文）](https://www.jianshu.com/p/7f4572b88c84)

正如我做了 Markdown 的约定一样，git commit 也得有个约定，不然每次书写都以不同格式写看得人眼花缭乱，所以搜了一下，这篇文章写得挺简单，够我使用了。

格式：

```Markdown
<type>(scope): desc
```

- type 用来说明类型，常用的有以下几种：
	- feat：完成新功能的开发
	- fix：代码 BUG 的修复
	- style：样式的修改
	- refactor：代码重构
	- docs：文档
	- chore：构建工具
- scope 用来说明此次变动影响的范围或文件
- desc 用来简短描述此次的变动，描述只要简明易理解就好，没必要写很多

如：`feat(deployment.js): add app deploy function`

## share [⬆](#weekly-4)

[readme](../README.md) | [previous](202011W3.md) | [next](202012W1.md)
