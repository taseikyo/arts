> @Author  : Lewis Tian (taseikyo@gmail.com)
>
> @Link    : github.com/taseikyo
>
> @Range   : 2021-08-01 - 2021-08-07

# Weekly #40

[readme](../README.md) | [previous](202107W5.md) | [next](202108W2.md)

æœ¬æ–‡æ€»å­—æ•° 2919 ä¸ªï¼Œé˜…è¯»æ—¶é•¿çº¦ï¼š5 åˆ† 38 ç§’ï¼Œç»Ÿè®¡æ•°æ®æ¥è‡ªï¼š[ç®—ç­¹å­—æ•°ç»Ÿè®¡](http://www.xiqei.com/tools?p=tj)ã€‚

![](../images/2021/08/potato_wang-rl_LJtvv0rI-unsplash.jpg)

*Photo by [è¿œæ‰© ç‹](https://unsplash.com/@potato_wang) on [Unsplash](https://unsplash.com/photos/rl_LJtvv0rI)*

> å±±å¤–é’å±±æ¥¼å¤–æ¥¼ï¼Œè¥¿æ¹–æ­Œèˆå‡ æ—¶ä¼‘ï¼Ÿæš–é£ç†å¾—æ¸¸äººé†‰ï¼Œç›´æŠŠæ­å·ä½œæ±´å·ã€‚ â€”â€” æ—å‡ã€Šé¢˜ä¸´å®‰é‚¸ã€‹

## Table of Contents

- [algorithm](#algorithm-)
- [review](#review-)
    - Python 3.10 å°é²œ
    - Mac å¼€å‘ç¯å¢ƒè®¾ç½®ï¼ˆ2021 ç‰ˆï¼‰
- [tip](#tip-)
    - ä¸€ä¸ª CSS å‘½ä»¤ï¼Œåè½¬ç½‘é¡µé¢œè‰²
    - pyenv - Python ç‰ˆæœ¬ç®¡ç†å™¨
- [share](#share-)
    - å·±æ‰€ä¸æ¬²ï¼Œå‹¿æ–½äºäººã€‚

## algorithm [ğŸ”](#weekly-40)

## review [ğŸ”](#weekly-40)

### 1. [Python 3.10 å°é²œ](https://www.cnblogs.com/dongfangtianyu/p/14713895.html)

1ã€è”åˆè¿ç®—ç¬¦

åœ¨ Python 3.10 ä¸­ï¼Œ `|` å¯ä»¥è¡¨ç¤º X ç±»å‹ æˆ– Y ç±»å‹ï¼Œä»¥å–ä»£ä¹‹å‰çš„ `typing.Union` å®Œæˆç±»å‹æ³¨è§£

æ—§å†™æ³•ï¼š

```Python
from typing import Union

def f(value: Union[int, str]) -> Union[int, str]:
    return value*2
```

æ–°å†™æ³•ï¼š

```Python
def f(value: int | str) -> int | str:
    return value*2
```

2ã€å¤šè¡Œä¸Šä¸‹æ–‡ç®¡ç†å™¨

```Python
with (
    open("test.txt", "r", encoding="utf-8") as f,  # æ‰“å¼€ç¬¬ä¸€ä¸ªæ–‡ä»¶
    open("test_copy.txt", "w", encoding=f.encoding) as f_copy,  # æ‰“å¼€ç¬¬äºŒä¸ªæ–‡ä»¶
):
    content = f.read()  # ä»ç¬¬ä¸€ä¸ªæ–‡ä»¶è·å–å†…å®¹
    f_copy.write(content)  # å‘ç¬¬äºŒä¸ªæ–‡ä»¶å†™å…¥å†…å®¹
```

3ã€ç»“æ„æ¨¡å¼åŒ¹é…ï¼ˆStructural Pattern Matchingï¼‰

å®é™…ä¸Šå°±æ˜¯ `switch...case...`

```Python
today = 1
match  today:
    case 0:
        day = "æ˜ŸæœŸå¤©"
    case 1:
        day = "æ˜ŸæœŸä¸€"
    case 2:
        day = "æ˜ŸæœŸäºŒ"
    case 3:
        day = "æ˜ŸæœŸä¸‰"
    case 4:
        day = "æ˜ŸæœŸå››"
    case 5:
        day = "æ˜ŸæœŸäº”"
    case 6:
        day = "æ˜ŸæœŸå…­"
    case _:
        day = "åˆ«é—¹...ä¸€ä¸ªæ˜ŸæœŸåªæœ‰ä¸ƒå¤©"

print(day)
```

- ä»ä¸Šå¾€ä¸‹åŒ¹é…
- åŒ¹é…ç¬¬ä¸€ä¸ª `case` ååœæ­¢
- å¦‚æœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„åŒ¹é…ï¼Œåˆ™ä¼šæ‰§è¡Œ `case _`

4ã€zip æ”¯æŒé•¿åº¦æ£€æŸ¥

ä¹‹å‰æ˜¯æ ¹æ®æœ€çŸ­çš„è¿›è¡Œæˆªæ–­å¤„ç†ï¼Œ3.10 ä¸­å¯ä»¥ä¼ é€’ `strict=True` å¯¹é•¿åº¦è¿›è¡Œä¸¥æ ¼æ£€æŸ¥

```Python
for i in zip(name_list, number_list, strict=True):
    print(i)

# ('æŠ¥è­¦', 110)
# ('æ€¥æ•‘', 120)
# ('æ¶ˆé˜²', 119)
# Traceback (most recent call last):
#     for i in zip(name_list, number_list, strict=True):
# ValueError: zip() argument 2 is shorter than argument 1
```

### 2. [Mac å¼€å‘ç¯å¢ƒè®¾ç½®ï¼ˆ2021 ç‰ˆï¼‰](https://www.swyx.io/new-mac-setup-2021)

è¿™ç¯‡æ–‡ç« ä»‹ç»äº†ä½œè€…å¦‚ä½•è®¾ç½®ä»–çš„å¼€å‘ç¯å¢ƒï¼Œå¦‚ç³»ç»Ÿè®¾ç½®ï¼Œè½¯ä»¶è®¾ç½®ç­‰ç­‰ï¼Œé‡Œé¢å½“ç„¶ä¹Ÿæœ‰ä¸€äº›æˆ‘ç”¨ä¸ä¸Š

è¯è¯´å›æ¥ï¼Œæˆ‘ä¹‹å‰ä¹Ÿæ€»ç»“äº†ä¸€ç¯‡è‡ªå·±çš„å¼€å‘ç¯å¢ƒæ€»ç»“ï¼Œä¸è¿‡ä¸€éƒ¨åˆ†è·Ÿå…¬å¸æœ‰å…³ï¼Œä¸å…·å¤‡å®Œå…¨çš„é€šç”¨æ€§

åœ¨å…¬å¸ç”¨ Macï¼Œå›å®¶ç”¨ Windowsï¼Œæ²¡ä¹ æƒ¯ Mac åè€Œè·Ÿ Windows ææ··äº†

æ¯”å¦‚å¤åˆ¶ <kbd>cmd + c</kbd>ï¼Œç”±äºé”®ä½çš„åŸå› ï¼Œå›å®¶ä¹‹åä¸€ä¸å°å¿ƒå°±ä¼šæŒ‰æˆ <kbd>opt + c</kbd>ï¼Œç¬‘æ­»

## tip [ğŸ”](#weekly-40)

### 1. [ä¸€ä¸ª CSS å‘½ä»¤ï¼Œåè½¬ç½‘é¡µé¢œè‰²](https://davidwalsh.name/dark-mode-invert-filter)

å¦‚ä½•ä½¿ç”¨ä¸€è¡Œ CSS å‘½ä»¤åè½¬ç½‘é¡µé¢œè‰²ï¼Ÿ

è¿™ä¸ªä¼¼ä¹è·Ÿæˆ‘ä¹‹å‰çœ‹åˆ°çš„ç”¨ CSS å‘½ä»¤å®ç°ç«–æ’æ–‡å­—ä¸€æ ·ï¼Œæ˜¯ä¸ªå¾ˆå°ä¼—ï¼ˆï¼Ÿï¼‰çš„å‘½ä»¤ï¼Œå½“ç„¶æˆ‘ä¸æ˜¯å‰ç«¯ï¼Œä¹Ÿæ²¡èµ„æ ¼è¯´è¿™ä¸ª

åè½¬ç½‘é¡µé¢œè‰²å‘½ä»¤å¦‚ä¸‹ï¼š

```CSS
html {
  filter: invert(1);
}
```

è¯¥åšå®¢ä¸‹é¢æœ‰è¯„è®ºåŠ äº†ç‚¹æ–™ï¼š

```CSS
html { filter: invert(1) contrast(0.95) saturate(0.5) hue-rotate(180deg);
```

### 2. [pyenv - Python ç‰ˆæœ¬ç®¡ç†å™¨](https://einverne.github.io/post/2017/04/pyenv.html)

1ã€ä»‹ç»

[pyenv](https://github.com/yyuu/pyenv) å¯ä»¥æ”¹å˜å…¨å±€çš„ Python ç‰ˆæœ¬ï¼Œåœ¨ç³»ç»Ÿä¸­å®‰è£…å¤šä¸ªç‰ˆæœ¬çš„ Pythonï¼Œ è®¾ç½®ç›®å½•çº§åˆ«çš„ Python ç‰ˆæœ¬ï¼Œè¿˜èƒ½åˆ›å»ºå’Œç®¡ç† virtual python environmentsã€‚æ‰€æœ‰çš„è®¾ç½®éƒ½æ˜¯ç”¨æˆ·çº§åˆ«çš„æ“ä½œï¼Œä¸éœ€è¦ sudo å‘½ä»¤ã€‚

pyenv é€šè¿‡ä¿®æ”¹ç³»ç»Ÿç¯å¢ƒå˜é‡æ¥å®ç°ä¸åŒ Python ç‰ˆæœ¬çš„åˆ‡æ¢ã€‚è€Œ virtualenv é€šè¿‡å°† Python åŒ…å®‰è£…åˆ°ä¸€ä¸ªç›®å½•æ¥ä½œä¸º Python åŒ…è™šæ‹Ÿç¯å¢ƒï¼Œé€šè¿‡åˆ‡æ¢ç›®å½•æ¥å®ç°ä¸åŒåŒ…ç¯å¢ƒé—´çš„åˆ‡æ¢ã€‚

pyenv å®ç°çš„ç²¾é«“ä¹‹å¤„åœ¨äºï¼Œå®ƒå¹¶æ²¡æœ‰ä½¿ç”¨å°†ä¸åŒçš„ `$PATH` æ¤å…¥ä¸åŒçš„ shell è¿™ç§é«˜è€¦åˆçš„å·¥ä½œæ–¹å¼ï¼Œè€Œæ˜¯ç®€å•åœ°åœ¨ `$PATH` çš„æœ€å‰é¢æ’å…¥äº†ä¸€ä¸ªå«ç‰‡è·¯å¾„ï¼ˆshimsï¼‰ï¼š`~/.pyenv/shims:/usr/local/bin:/usr/bin:/bin`ã€‚æ‰€æœ‰å¯¹ Python å¯æ‰§è¡Œæ–‡ä»¶çš„æŸ¥æ‰¾éƒ½ä¼šé¦–å…ˆè¢«è¿™ä¸ª shims è·¯å¾„æˆªè·ï¼Œä»è€Œä½¿åæ–¹çš„ç³»ç»Ÿè·¯å¾„å¤±æ•ˆã€‚

ä½¿ç”¨ `pyenv commands` æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨å‘½ä»¤

pyenv ä»æºç å®‰è£… Python, æ¯ä¸€ä¸ªå®‰è£…çš„ç‰ˆæœ¬éƒ½ä¼šåœ¨ pyenv æ ¹ç›®å½•çš„ versions ç›®å½•ä¸‹

2ã€å®‰è£…ä¸å¸è½½

```Python
pyenv install 2.7.3   # å®‰è£… python
ls ~/.pyenv/versions/
pyenv uninstall 2.7.3 # å¸è½½ python
rm -rf ~/.pyenv/versions/2.7.3 # å¦ä¸€ç§å¸è½½æ–¹å¼
```

3ã€æŸ¥çœ‹æœ¬æœºå®‰è£… Python ç‰ˆæœ¬

```Python
pyenv versions
```

4ã€æŸ¥çœ‹å¯å®‰è£… Python ç‰ˆæœ¬

```Python
pyenv install -l
```

5ã€Python åˆ‡æ¢

å¯»æ‰¾ python çš„æ—¶å€™ä¼˜å…ˆçº§ï¼š`shell > local > global`

pyenv ä¼šä»å½“å‰ç›®å½•å¼€å§‹å‘ä¸Šé€çº§æŸ¥æ‰¾ `.python-version` æ–‡ä»¶ï¼Œç›´åˆ°æ ¹ç›®å½•ä¸ºæ­¢ã€‚è‹¥æ‰¾ä¸åˆ°ï¼Œå°±ç”¨ global ç‰ˆæœ¬ã€‚

```Python
pyenv global 2.7.3  # è®¾ç½®å…¨å±€çš„ Python ç‰ˆæœ¬ï¼Œé€šè¿‡å°†ç‰ˆæœ¬å·å†™å…¥ ~/.pyenv/version æ–‡ä»¶çš„æ–¹å¼ã€‚
pyenv local 2.7.3 # è®¾ç½® Python æœ¬åœ°ç‰ˆæœ¬ï¼Œé€šè¿‡å°†ç‰ˆæœ¬å·å†™å…¥å½“å‰ç›®å½•ä¸‹çš„ .python-version æ–‡ä»¶çš„æ–¹å¼ã€‚é€šè¿‡è¿™ç§æ–¹å¼è®¾ç½®çš„ Python ç‰ˆæœ¬ä¼˜å…ˆçº§è¾ƒ global é«˜ã€‚
```

6ã€pyenv-virtualenv

ä½¿ç”¨è‡ªåŠ¨å®‰è£… pyenv åï¼Œå®ƒä¼šè‡ªåŠ¨å®‰è£…éƒ¨åˆ†æ’ä»¶ï¼Œé€šè¿‡ `pyenv-virtualenv` æ’ä»¶å¯ä»¥å¾ˆå¥½çš„å’Œ virtualenv ç»“åˆï¼š

```Bash
ll ~/.pyenv/plugins
total 24K
drwxr-xr-x 4 einverne einverne 4.0K Apr 22 10:55 pyenv-doctor
drwxr-xr-x 5 einverne einverne 4.0K Apr 22 10:55 pyenv-installer
drwxr-xr-x 4 einverne einverne 4.0K Apr 22 10:55 pyenv-update
drwxr-xr-x 7 einverne einverne 4.0K Apr 22 10:55 pyenv-virtualenv
drwxr-xr-x 4 einverne einverne 4.0K Apr 22 10:55 pyenv-which-ext
drwxr-xr-x 5 einverne einverne 4.0K Apr 22 10:54 python-build
```

7ã€åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ

```Python
pyenv virtualenv 2.7.15 env-name
```

è‹¥ä¸æŒ‡å®š python ç‰ˆæœ¬ï¼Œä¼šé»˜è®¤ä½¿ç”¨å½“å‰ç¯å¢ƒ python ç‰ˆæœ¬ã€‚å¦‚æœæŒ‡å®š Python ç‰ˆæœ¬ï¼Œåˆ™ä¸€å®šè¦æ˜¯å·²ç»å®‰è£…è¿‡çš„ç‰ˆæœ¬ï¼Œå¦åˆ™ä¼šå‡ºé”™ã€‚ç¯å¢ƒçš„çœŸå®ç›®å½•ä½äº `~/.pyenv/versions` ä¸‹

8ã€åˆ—å‡ºå½“å‰è™šæ‹Ÿç¯å¢ƒ

```Python
pyenv virtualenvs
pyenv activate env-name  # æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
pyenv deactivate #é€€å‡ºè™šæ‹Ÿç¯å¢ƒï¼Œå›åˆ°ç³»ç»Ÿç¯å¢ƒ
```

9ã€åˆ é™¤è™šæ‹Ÿç¯å¢ƒ

```Python
pyenv uninstall env-name
rm -rf ~/.pyenv/versions/env-name  # æˆ–è€…åˆ é™¤å…¶çœŸå®ç›®å½•
```

ä½¿ç”¨ pyenv æ¥ç®¡ç† pythonï¼Œä½¿ç”¨ pyenv-virtualenv æ’ä»¶æ¥ç®¡ç†å¤šç‰ˆæœ¬ python åŒ…ã€‚æ­¤æ—¶ï¼Œè¿˜éœ€æ³¨æ„ï¼Œå½“æˆ‘ä»¬å°†é¡¹ç›®è¿è¡Œçš„ env ç¯å¢ƒéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒæ—¶ï¼Œç”±äºæˆ‘ä»¬çš„ python åŒ…æ˜¯ä¾èµ– python çš„ï¼Œéœ€è¦æ³¨æ„ç”Ÿäº§ç¯å¢ƒçš„ python ç‰ˆæœ¬é—®é¢˜ã€‚

## share [ğŸ”](#weekly-40)

### 1. å·±æ‰€ä¸æ¬²ï¼Œå‹¿æ–½äºäººã€‚

åŠªåŠ›æˆä¸ºä¸€ä¸ªæ›´å¥½çš„äººï¼Œåšåˆ°ç®€å•ä¸”æ¸©æŸ”ï¼›

è¦æ¨å·±åŠäººï¼Œä¸è¦**ä¸¥äºå¾‹äººï¼Œå®½ä»¥å¾…å·±**ï¼Œé”®ç›˜ä¾ çœŸçš„çƒ¦ï¼Œä¸¥é‡å½±å“å†²æµªä½“éªŒï¼›

![](../images/2021/08/6ee1-izrvxmh6796055.png)

\**CNNIC ç¬¬ 46 æ¬¡è°ƒæŸ¥æŠ¥å‘Šï¼šç½‘æ°‘å±æ€§ç»“æ„ï¼ˆæœ¬ç§‘åŠä»¥ä¸Šä»…å  8.8%ï¼‰*

[readme](../README.md) | [previous](202107W5.md) | [next](202108W2.md)
