> @Author  : Lewis Tian (taseikyo@gmail.com)
>
> @Link    : github.com/taseikyo
>
> @Range   : 2021-08-01 - 2021-08-07

# Weekly #40

[readme](../README.md) | [previous](202107W5.md) | [next](202108W2.md)

## Table of Contents

- [algorithm](#algorithm-)
- [review](#review-)
    - Python 3.10 尝鲜
- [tip](#tip-)
- [share](#share-)

## algorithm [🔝](#weekly-40)

## review [🔝](#weekly-40)

### 1. [Python 3.10 尝鲜](https://www.cnblogs.com/dongfangtianyu/p/14713895.html)

1、联合运算符

在 Python 3.10 中， `|` 可以表示 X 类型 或 Y 类型，以取代之前的 `typing.Union` 完成类型注解

旧写法：

```Python
from typing import Union

def f(value: Union[int, str]) -> Union[int, str]:
    return value*2
```

新写法：

```Python
def f(value: int | str) -> int | str:
    return value*2
```

2、多行上下文管理器

```Python
with (
    open("test.txt", "r", encoding="utf-8") as f,  # 打开第一个文件
    open("test_copy.txt", "w", encoding=f.encoding) as f_copy,  # 打开第二个文件
):
    content = f.read()  # 从第一个文件获取内容
    f_copy.write(content)  # 向第二个文件写入内容
```

3、结构模式匹配（Structural Pattern Matching）

实际上就是 `switch...case...`

```Python
today = 1
match  today:
    case 0:
        day = "星期天"
    case 1:
        day = "星期一"
    case 2:
        day = "星期二"
    case 3:
        day = "星期三"
    case 4:
        day = "星期四"
    case 5:
        day = "星期五"
    case 6:
        day = "星期六"
    case _:
        day = "别闹...一个星期只有七天"

print(day)
```

- 从上往下匹配
- 匹配第一个 `case` 后停止
- 如果没有符合条件的匹配，则会执行 `case _`

4、zip 支持长度检查

之前是根据最短的进行截断处理，3.10 中可以传递 `strict=True` 对长度进行严格检查

```Python
for i in zip(name_list, number_list, strict=True):
    print(i)

# ('报警', 110)
# ('急救', 120)
# ('消防', 119)
# Traceback (most recent call last):
#     for i in zip(name_list, number_list, strict=True):
# ValueError: zip() argument 2 is shorter than argument 1
```

## tip [🔝](#weekly-40)

## share [🔝](#weekly-40)

[readme](../README.md) | [previous](202107W5.md) | [next](202108W2.md)
