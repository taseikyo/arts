> @Author  : Lewis Tian (taseikyo@gmail.com)
>
> @Link    : github.com/taseikyo
>
> @Range   : 2024-06-09 - 2024-06-15

# Weekly #66

[readme](../README.md) | [previous](202406W1.md) | [next](202406W3.md)

![](../images/2024/06/luke-witter-DersxYwcciQ-unsplash.jpg "Weekly #66")

\**Photo by [Luke Witter](https://unsplash.com/@lukewitter) on [Unsplash](https://unsplash.com/photos/a-man-riding-a-bike-next-to-a-body-of-water-DersxYwcciQ)*

## Table of Contents

- [algorithm](#algorithm-)
- [review](#review-)
    - å¦‚æœä½ èƒ½æ­£ç¡®å›ç­”è¿™ 7 ä¸ªé—®é¢˜ï¼Œä½ å°±å¾ˆæ“…é•¿ Python
    - åœ¨ Linux ä¸­è·å– PID çš„ CR3 å€¼
- [tip](#tip-)
- [share](#share-)
    - åå‘æ‹†è§£è®©äººä¸Šç˜¾çš„å¥—è·¯ï¼Œæ‰¾å›è‡ªå¾‹

## algorithm [ğŸ”](#weekly-66)

## review [ğŸ”](#weekly-66)

### 1. [å¦‚æœä½ èƒ½æ­£ç¡®å›ç­”è¿™ 7 ä¸ªé—®é¢˜ï¼Œä½ å°±å¾ˆæ“…é•¿ Python](https://zlliu.medium.com/youre-decent-at-python-if-you-can-answer-these-7-questions-correctly-7de5e8279e7f)

1ã€`@print`

```Python
@print
def testing():
    print('hello!!')
    return 1000
```

What does this do?

```Markdown
A) Syntax error. There is no such thing as @ in Python
B) this causes testing() to automatically print 1000 when we call it
C) this prints <function testing at 0x1023e2340>
D) this prints 1000 automatically without us calling testing()
E) testing()'s metadata will automatically print whenever it is called
```

<details>
    <summary>Answer</summary>
Answer: C

here, we are decorating testing() with print(). This is the same as:

```Python
def testing():
    print('hello!!')
    return 1000

testing = print(testing)
```

since print(testing) is called, <function testing at 0x1023e2340> will be printed (the gibberish numbers at the end might differ tho)
</details>

2ã€`*_`

```Python
a, b, *_ = [1, 2, 3, 4, 5]
print(_)
```

What does this print?

```
A) Syntax error
B) [3, 4, 5]
C) [1, 2, 3, 4, 5]
D) <generator object <genexpr> at 0x1003847c0>
E) NameError: â€˜_â€™ is not a valid variable name
```

<details>
    <summary>Answer</summary>
Answer: B

- `_` is a valid variable name
- `a` is assigned to 1 and `b` is assigned to 2 (tuple unpacking)
- `*` in front of `_` allows `_` to "catch" multiple values (0 to infinite)
- `_` will thus "catch" all unassigned numbers â€” 3, 4, 5
- `_` will thus be `[3, 4, 5]`
</details>

3ã€more than 1 `*_`

```Python
*__, a, b, *_ = [1, 2, 3, 4, 5, 6]
print(__, _)
```

What does this print?

```
A) Syntax error
B) [1] [4, 5, 6]
C) [1, 2] [5, 6]
D) [1, 2, 3] [6]
E) <generator object <genexpr> at 0x1003847c0>
```

<details>
    <summary>Answer</summary>
Answer: A

Only ONE `*` is allowed per expression. Having 2 causes a SyntaxError
</details>

4ã€class shenanigans

```Python
class Dog:
  def __init__(self, *args, **kwargs):
    args, kwargs = kwargs, args
    self.name = args['name']
    self.age = kwargs[0]

dog = Dog('rocky', 5)
```

What error does this cause?

```
A) No error
B) ZeroDivisionError
C) IndexError
D) KeyError
E) All of the above
```

<details>
    <summary>Answer</summary>
Answer: D

`*args` allows our function to take in any number of positional arguments, while `**kwargs` allow our function to take in any number of keyword arguments.

`Dog('rocky', 5)` passes 2 positional arguments to `__init__`, and thus `args=('rocky', 5)` while `kwargs={}` (no keyword arguments here)

`args, kwargs = kwargs, args` switches args and kwargs. So now, `args={}` and `kwargs=('rocky', 5)`

When we attempt to call `args['name']`, we get a KeyError as at this point, args is an empty dictionary.
</details>

5ã€GIL

What is the Python Global Interpreter Lock (GIL)?

```
A) a physical lock that secures Python servers from intruders
B) a thing that prevents the Python interpreter from leaking data to other processes on your computer
C) a programming paradigm that allows us to run multiple Python processes concurrently
D) a thing that allows one thread to run per interpreter at one time
E) a thing that enables our Python interpreter to run code faster
```

<details>
    <summary>Answer</summary>
Answer: D

The Python GIL makes is such that only 1 thread is able to run in the Python interpreter at one time. (tho we can use multiprocessing to circumvent this)
</details>

6ã€True = False

```Python
True = False
False = True

print(not True, not False)
```

what does this print?

```
A) SyntaxError
B) False True
C) True False
D) True True
E) False False
```

<details>
    <summary>Answer</summary>
Answer: A

We cannot assign anything to True as True is a reserved Python keyword. I hope you answered this correctly.
</details>

7ã€Context manager

What is a context manager used for?

```
A) to manage contexts
B) to properly handle resources eg file operations or databases
C) to ensure that type hints in Python are enforced
D) to make sure that any exceptions do not affect other contexts
E) to ensure that the Python interpreter does not taking up an excessive amount of RAM
```

<details>
    <summary>Answer</summary>
Answer: B

```Python
# let's say we need to read a file

file = open('hi.txt')

print(file.read())

file.close()
```

if we do this, thereâ€™s a chance that `file.close()` might not executed due to some error. Not closing the file might lead to the following problems:

- the file might take up RAM and slow down your program
- changes made to the file might not stick, as many files only save properly when they are closed
- in Windows, a file is treated as locked when it is open, so other scanners or programs might not be able to read it
- and other weird issues

```Python
# reading file using context manager

with open('hi.txt') as file:
    print(file.read())
```
</details>

### 2. [åœ¨ Linux ä¸­è·å– PID çš„ CR3 å€¼](https://carteryagemann.com/pid-to-cr3.html)

ç”±äºäº’è”ç½‘ä¸Šç¼ºä¹ç¤ºä¾‹ï¼Œç¼–å†™ä½çº§ä»£ç å¯èƒ½å¾ˆå›°éš¾ã€‚ ç­”æ¡ˆé€šå¸¸ä½äº 3,000 é¡µæ‰‹å†Œçš„æŸä¸ªåœ°æ–¹ï¼Œåªæœ‰æœ€æ•¬ä¸šçš„ç¨‹åºå‘˜æ‰èƒ½æ‰¾åˆ°å®ƒã€‚

ä¸Šå‘¨æˆ‘æœ‰è¿‡è¿™æ ·çš„ç»å†ã€‚ç›®å‰ï¼Œæˆ‘çš„ç ”ç©¶æ¶‰åŠå¤§é‡ç‰¹å®šäº x86 çš„ç¼–ç¨‹å’Œè™šæ‹Ÿæœºè‡ªçœ ï¼ˆVMIï¼‰ã€‚ ä¸ºäº†æµ‹è¯•æˆ‘æ­£åœ¨å¼€å‘çš„æ¦‚å¿µéªŒè¯è™šæ‹Ÿæœºç®¡ç†ç¨‹åºä¹‹ä¸€ï¼Œæˆ‘éœ€è¦ä¸€ç§æ–¹æ³•æ¥å¿«é€Ÿå°† Linux PID å€¼è½¬æ¢ä¸ºç›¸åº”çš„ åœ¨ CPU ä¸Šæ‰§è¡Œè¯¥è¿›ç¨‹æ—¶åŠ è½½åˆ° CR3 å¯„å­˜å™¨ä¸­çš„å€¼ã€‚å¯¹äºé‚£äº›ä¸ç†Ÿæ‚‰ x86 CPU æ¶æ„çš„äººï¼Œ æˆ‘å»ºè®®åœ¨Linux x86é¡µé¢è¡¨ç®¡ç†ä¸Šé˜…è¯»æ­¤é¡µé¢ã€‚ ç®€è€Œè¨€ä¹‹ï¼Œå½“ä¸€ä¸ªè¿›ç¨‹åœ¨ x86 CPU ä¸Šæ‰§è¡Œæ—¶ï¼ŒCR3 å¯„å­˜å™¨ä¼šåŠ è½½è¯¥è¿›ç¨‹çš„é¡µé¢å…¨å±€ç›®å½• ï¼ˆPGDï¼‰ çš„ç‰©ç†åœ°å€ã€‚ è¿™æ˜¯å¿…éœ€çš„ï¼Œä»¥ä¾¿ CPU å¯ä»¥æ‰§è¡Œä»è™šæ‹Ÿå†…å­˜åœ°å€åˆ°ç‰©ç†å†…å­˜åœ°å€çš„è½¬æ¢ã€‚ ç”±äºæ¯ä¸ªè¿›ç¨‹éƒ½éœ€è¦è‡ªå·±çš„ PGDï¼Œå› æ­¤ CR3 å¯„å­˜å™¨ä¸­çš„å€¼å¯¹äºç³»ç»Ÿä¸­çš„æ¯ä¸ªè®¡åˆ’è¿›ç¨‹éƒ½æ˜¯å”¯ä¸€çš„ã€‚ è¿™å¯¹ VMI æ¥è¯´éå¸¸æ–¹ä¾¿ï¼Œå› ä¸ºè¿™æ„å‘³ç€æˆ‘ä»¬ä¸éœ€è¦ä¸æ–­æ‰«æå®¢æˆ·æœºå†…æ ¸çš„å†…å­˜æ¥è·Ÿè¸ªå“ªä¸ªè¿›ç¨‹ æ­£åœ¨æ‰§è¡Œã€‚ç›¸åï¼Œæˆ‘ä»¬å¯ä»¥åªç›‘æ§å¯¹ CR3 å¯„å­˜å™¨çš„å†™å…¥ã€‚

ä½†æ˜¯ï¼Œä»…ä»…è·Ÿè¸ª CR3 å¯„å­˜å™¨çš„æ›´æ”¹å¹¶ä¸èƒ½è®©æˆ‘ä»¬æ·±å…¥äº†è§£å®¢æˆ·æœºå†…æ ¸åœ¨åšä»€ä¹ˆã€‚ è¿™é€šå¸¸è¢«ç§°ä¸ºè¯­ä¹‰å·®è·é—®é¢˜ã€‚ä¸ºäº†è·¨è¶Šè¿™ä¸ªå·®è·ï¼Œæˆ‘ä»¬éœ€è¦ç»˜åˆ¶æˆ‘ä»¬æ„Ÿå…´è¶£çš„è¿‡ç¨‹çš„ PID å€¼ åˆ°å…¶ç›¸åº”çš„ CR3 å€¼ã€‚ä»¥ä¸‹ Linux å†…æ ¸æ¨¡å—ä»£ç ç‰‡æ®µå°±æ˜¯è¿™æ ·åšçš„ï¼š

```C
#include <linux/module.h>
#include <linux/kernel.h>
#include <linux/sched.h>
#include <linux/pid.h>
#include <asm/io.h>

unsigned long pid_to_cr3(int pid)
{
    struct task_struct *task;
    struct mm_struct *mm;
    void *cr3_virt;
    unsigned long cr3_phys;

    task = pid_task(find_vpid(pid), PIDTYPE_PID);

    if (task == NULL)
        return 0; // pid has no task_struct

    mm = task->mm;

    // mm can be NULL in some rare cases (e.g. kthreads)
    // when this happens, we should check active_mm
    if (mm == NULL) {
        mm = task->active_mm;
    }

    if (mm == NULL)
        return 0; // this shouldn't happen, but just in case

    cr3_virt = (void *) mm->pgd;
    cr3_phys = virt_to_phys(cr3_virt);

    return cr3_phys;
}
```

åº”è¯¥æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶ CR3 å¯„å­˜å™¨å¯ç”¨äºè·Ÿè¸ªæ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹ï¼Œä½†å®ƒæ— æ³•è·Ÿè¸ªæ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ å› ä¸ºçº¿ç¨‹å…±äº«å†…å­˜ï¼Œå› æ­¤å°†å…·æœ‰ç›¸åŒçš„ PGD å’Œ CR3 å€¼ã€‚é€šè¿‡å†…çœè·Ÿè¸ªçº¿ç¨‹çš„è°ƒåº¦æ˜¯ ä¸€ä¸ªæ›´å¤æ‚çš„ä»»åŠ¡ï¼Œæ˜¯å¦ä¸€ä¸ªæ—¶é—´çš„è¯é¢˜ã€‚

ä¸ºç®€å•èµ·è§ï¼Œæˆ‘å°†è½¬æ¢ä»£ç å®ç°ä¸º Linux å†…æ ¸æ¨¡å—ã€‚å¦‚æœæ‚¨å¯¹å¦‚ä½•ä½¿ç”¨çº¯å†…çœè¿›è¡Œæ­¤è½¬æ¢æ„Ÿå…´è¶£ åœ¨æœªä¿®æ”¹çš„å†…æ ¸ä¸Šï¼Œæ‚¨åº”è¯¥æŸ¥çœ‹ [libVMI](https://github.com/libvmi/libvmi/blob/master/libvmi/os/linux/memory.c#L145) çš„ä»£ç ã€‚

## tip [ğŸ”](#weekly-66)

## share [ğŸ”](#weekly-66)

### 1. [åå‘æ‹†è§£è®©äººä¸Šç˜¾çš„å¥—è·¯ï¼Œæ‰¾å›è‡ªå¾‹](https://xugaoyi.com/pages/d6d331/#%E6%89%BE%E5%9B%9E%E8%87%AA%E5%BE%8B-%E6%94%B6%E8%8E%B7%E7%A7%AF%E6%9E%81%E8%80%8C%E9%95%BF%E4%B9%85%E7%9A%84%E5%BF%AB%E4%B9%90)

å½“ä½ æ‰“å¼€æ‰‹æœºå‡†å¤‡å­¦ä¹ æˆ–è€…æŸ¥ä¸ªèµ„æ–™çš„æ—¶å€™ï¼Œå¾ˆæœ‰å¯èƒ½ä¸çŸ¥ä¸è§‰çš„å°±è„±ç¦»çš„æ­£è§„... æŸæŸ app å‘æ¥é€šçŸ¥ï¼šxx æ˜æ˜Ÿå®˜å®£å•¦ã€xx æ‰‹æ¸¸é‡ç£…ä¸Šçº¿ï¼Œä¸€èµ·å¼€å¯ä¿®ä»™ä¹‹æ—…å§ï¼ xx ç»“è¡£å‘å¸ƒæ–°ç•ª - 4k ç”»è´¨ & AR ä½“éªŒã€99 + æœªè¯»ä¿¡æ¯ã€æ”¯ä»˜å®åˆ°è´¦ 100 ä¸‡å…ƒ.... ä½ å¿ƒæƒ³ï¼Œå°±çœ‹ä¸€ä¼šï¼Œå°±ä¸€ä¼šå„¿... ä¸çŸ¥ä¸è§‰ä¸¤ä¸‰ä¸ªå°æ—¶è¿‡å»äº†ï¼Œä½ å¼€å§‹ç„¦èºã€åæ‚”ã€è‡ªè´£ã€‚ç¬¬äºŒå¤©ï¼Œä½ åˆæ‰è¿›ç›¸åŒçš„å‘é‡Œã€‚ä½ å¯èƒ½ä¼šçº³é—·ï¼Œä¸ºä»€ä¹ˆæˆ‘çš„è‡ªåˆ¶åŠ›è¿™ä¹ˆå·®ï¼Ÿä¸ºä»€ä¹ˆå¯¹æŸä»¶äº‹æ¬²ç½¢ä¸èƒ½ï¼Ÿ

> ã€Šæ¬²ç½¢ä¸èƒ½ã€‹
>
> æ•°å­—æ—¶ä»£æ¯”äººç±»å†å²ä¸Šçš„ä»»ä½•æ—¶ä»£éƒ½æ›´å®¹æ˜“ä¸Šç˜¾...Facebookã€Instagramã€ç½‘ç»œè‰²æƒ…ã€ç½‘è´­åœ¨ä¸‹é’©... é—®é¢˜ä¸å‡ºåœ¨äººç¼ºä¹æ„å¿—åŠ›ä¸Šï¼Œè€Œåœ¨äº â€œå±å¹•é‚£è¾¹æœ‰æ•°åƒäººåœ¨åŠªåŠ›å·¥ä½œï¼Œä¸ºçš„å°±æ˜¯ç ´åä½ çš„è‡ªå¾‹â€
>
> æ¥è‡ªã€Šæ¬²ç½¢ä¸èƒ½ - åˆ·å±æ—¶ä»£å¦‚ä½•æ‘†è„±è¡Œä¸ºä¸Šç˜¾ã€‹ä¸€ä¹¦

æˆ‘ä»¬æ­£åœ¨è¢«ä¸€ä¸ªç®—æ³•å’Œå¨±ä¹æ‰€åŒ…è£¹çš„ç”µå­ ' æµ·æ´›å›  ' ä¸­å´ä¸è‡ªçŸ¥ï¼Œæƒ³è¦æ‘†è„±è¿™äº›ä¸Šç˜¾è¡Œä¸ºï¼Œç¬¬ä¸€æ­¥å°±æ˜¯åå‘æ‹†è§£é‚£äº›è®©æˆ‘ä»¬ä¸Šç˜¾çš„äº§å“çš„å¥—è·¯ã€‚ã€Šæ¬²ç½¢ä¸èƒ½ã€‹ä¹¦ä¸­æ€»ç»“äº†å…­ä¸ªè®©äººä¸Šç˜¾çš„é’©å­ï¼š

1ã€è¯±äººçš„ç›®æ ‡

- è‰²æƒ…ç‰‡
- æ¸¸æˆä¸­æˆä¸º "ç‹è€…"ã€å±‚å‡ºä¸ç©·çš„é«˜é¢œå€¼çš®è‚¤...

2ã€æ— æ³•æŠµæŒ¡æ— æ³•é¢„çŸ¥çš„ç§¯æåé¦ˆ

- ç¤¾äº¤ä¸­çš„ç‚¹èµåŠŸèƒ½
- æŸéŸ³åå‡ ç§’ä¸€æ¡çš„è§†é¢‘ï¼Œä¸éœ€è¦ä½ åŠ¨è„‘å°±å¯ä»¥è½»è½»æ¾æ¾è·å¾—å“ˆå“ˆå¤§ç¬‘çš„å¿«æ„Ÿï¼Œæœ‰æ—¶å€™è¿˜æœ‰ä¸€ç§æˆ‘å­¦ä¹ åˆ°äº†çš„æ„Ÿè§‰ï¼Œä½ æ°¸è¿œçŒœä¸åˆ°ä¸‹ä¸€æ¡å°†ä¼šå‡ºç°ä»€ä¹ˆæƒŠå–œã€‚ä½ åˆ·çš„è¶Šå¤šç®—æ³•å°±è¶Šç²¾å‡†ï¼Œè¶ŠçŸ¥é“ä½ çš„æƒ…ç»ª G ç‚¹åœ¨å“ªé‡Œï¼Œä½ å°±è¶Šå®¹æ˜“è¢«ä¿˜è·ã€‚
- ç›´æ’­ä¸­çš„æ‰“èµè¢«ä¸»æ’­è¡¨ç¤ºçš„æ„Ÿè°¢å’Œé€ä¸Šçš„ ' ä¹ˆä¹ˆå“’'

3ã€æ¸è¿›å¼çš„è¿›æ­¥å’Œæ”¹å–„çš„æ„Ÿè§‰

- æ¸¸æˆä¸­çš„å‡çº§ç­–ç•¥

4ã€éšç€æ—¶é—´çš„æ¨ç§»è¶Šæ¥è¶Šå›°éš¾çš„ä»»åŠ¡

- æ¸¸æˆä¸­çš„å‡çº§ç­–ç•¥

5ã€éœ€è¦è§£å†³å´åˆæš‚æœªè§£å†³çš„ç´§å¼ æ„Ÿ

- ç”µå½±æˆ–ç”µè§†å‰§ç»“å°¾æœ‰æ„åˆ¶é€ çš„ä¸€ä¸ªæ‚¬å¿µï¼Œç»™ä½ ä¸€ç§æœªå®Œæˆçš„ç´§å¼ æ„Ÿï¼Œä½ è¿«åˆ‡æƒ³çŸ¥é“åé¢ä¼šå‘ç”Ÿä»€ä¹ˆ

6ã€å¼ºå¤§çš„ç¤¾ä¼šè”ç³»

- ä¸é˜Ÿå‹ç›¸çº¦å¼€é»‘
- æ¸¸æˆä¸­èƒ½å½°æ˜¾åœ°ä½ã€è´¢å¯Œã€èƒ½åŠ›ç­‰çš„è£…å¤‡ï¼ˆå¦‚ï¼šåƒé¸¡æ¸¸æˆä¸­çš„ç›èæ‹‰è’‚çš®è‚¤ï¼‰


è·å¾—å¿«ä¹çš„æ–¹å¼ï¼Œä½ å¯ä»¥é€‰æ‹©æ²‰è¿·åœ¨ä½ çš„æ‰‹æœºé‡Œåˆ·è§†é¢‘ã€æ‰“æ¸¸æˆã€ç…²å‰§ï¼Œæ¯«ä¸è´¹åŠ›çš„æ”¶è´§å¤§æŠŠçš„å¿«ä¹ã€‚ä½ è¿˜å¯ä»¥é€‰æ‹©ä¸€æ¡æ›´éš¾çš„è·¯ï¼šé€‰æ‹©è‡ªå¾‹ã€é€‰æ‹©å»¶è¿Ÿæ»¡è¶³ã€é€‰æ‹©ä¼šè®©ä½ ä¸é‚£ä¹ˆèˆ’æœçš„åŠªåŠ›å’Œæˆé•¿ã€‚

æ”¶è·å¿«ä¹çš„æ–¹å¼æ²¡æœ‰ç»å¯¹çš„å¯¹ä¸é”™ï¼Œä½†æ˜¯ï¼Œå¦‚æœå¿«ä¹è§¦æ‰‹å¯åŠï¼Œè¿™ç§å»‰ä»·çš„å¿«ä¹ä¹Ÿå°±ä¸å€¼å¾—çæƒœï¼Œéšæ—¶éƒ½å¯èƒ½æŠ›å¼ƒã€‚è¿‡åè¿˜å¯èƒ½è®©ä½ æµªè´¹äº†å¤§æŠŠæ—¶é—´ï¼Œè¯¥åšçš„æ­£äº‹æ²¡æœ‰å®Œæˆï¼Œä½ æ„Ÿè§‰ç©ºè™šã€ç„¦èºã€è‡ªè´£...

æ—¢ç„¶å¦‚æ­¤ï¼Œæˆ‘ä»¬ä¸€èµ·é€‰æ‹©é‚£æ¡æ›´éš¾çš„è·¯å§ï¼

[readme](../README.md) | [previous](202406W1.md) | [next](202406W3.md)
