> @Author  : Lewis Tian (taseikyo@gmail.com)
>
> @Link    : github.com/taseikyo
>
> @Range   : 2021-05-16 - 2021-05-22

# Weekly #29

[readme](../README.md) | [previous](202105W2.md) | [next](202105W4.md)

## Table of Contents

- [algorithm](#algorithm-)
- [review](#review-)
    - 下一代图片格式：AVIF
- [tip](#tip-)
    - AirPodsPro 声音小的解决办法
- [share](#share-)

## algorithm [🔝](#weekly-29)

## review [🔝](#weekly-29)

### 1. [下一代图片格式：AVIF](https://darekkay.com/blog/avif-images)

这篇文章介绍了 AVIF（AV1 Image File Format）格式图片，据说是下一代图片格式，压缩率极高，比 webp 还高。

| 格式 | 大小 | 图片 |
|:-:|:-:|:-:|
| JPEG | 30 kB | ![](../images/2021/05/cow.jpg) |
| WebP | 15 kB | ![](../images/2021/05/cow.webp) |
| AVIF | 11 kB | <picture><source type="image/avif" srcset="../images/2021/05/cow.avif" /><img src="../images/2021/05/format-not-supported.png" alt="Cow" /></picture> |

如果上面第三个图片显示的不是牛，就表示你正在用的浏览器不支持。

比如在我看的时候 Edge 还不支持，换成 Chrome 就好了。

webp 和 avif 格式相对于 jpeg 分别减少了 50% 和 63%。

有几种将其他格式图片换成 AVIF 格式图片的方法：

- [Squoosh](https://squoosh.app/)

很好用的一个图片格式转化网站，我之前用过很多次了，还可以压缩图片，不愧是谷歌出品。

- [Squoosh CLI](https://www.npmjs.com/package/@squoosh/cli)

```Bash
squoosh-cli --avif '{speed: 2}' cow.jpg
```

*speed* 参数越小会使转换速度越慢，但文件大小会更小。

- [ImageMagick](https://imagemagick.org/index.php)

```Bash
convert -quality 75 cow.jpg cow.avif
```

一个渐进式增强（Progressive enhancement）的例子：

截至 2021 年 4 月，WebP 的全球使用率为 93%，AVIF 为 63%。幸运的是，有一个向后兼容的功能，为不支持的浏览器提供一个回退。

```HTML
<picture>
  <source type="image/avif" srcset="cow.avif" />
  <source type="image/webp" srcset="cow.webp" />
  <img src="cow.jpg" srcset="cow.png" alt="Cow" />
</picture>
```

浏览器将从上到下匹配格式，并使用它支持的第一个格式。AVIF 被列为第一种格式，因为它提供最好的压缩。

如果浏览器完全不支持 `<picture>`（IE11：你看我干嘛？），所有的 `<source>` 条目将被忽略，JPEG `<img>` 将被作为后备。这就是渐进式增强的一个完美例子。

## tip [🔝](#weekly-29)

### 1. AirPodsPro 声音小的解决办法

第二次遇到了，索性做个记录吧，解决方法来自酷安：

![](../images/2021/05/1620374097677.jpg)

## share [🔝](#weekly-29)

[readme](../README.md) | [previous](202105W2.md) | [next](202105W4.md)
