> @Author  : Lewis Tian (taseikyo@gmail.com)
>
> @Link    : github.com/taseikyo
>
> @Range   : 2024-11-24 - 2024-11-30

# Weekly #90

[readme](../README.md) | [previous](202411W3.md) | [next](202412W1.md)

![](../images/2024/11/fatma-sonmez-zF-ZOyuL_is-unsplash.jpg "Weekly #90")

\**Photo by [Fatma Sönmez](https://unsplash.com/@fsonmez) on [Unsplash](https://unsplash.com/photos/a-beach-filled-with-lots-of-sea-shells-under-a-cloudy-sky-zF-ZOyuL_is)*

## Table of Contents

- [algorithm](#algorithm-)
	- 两个线程交替打印1-100之间的奇数和偶数
	- N个线程交替打印1-100
- [review](#review-)
- [tip](#tip-)
- [share](#share-)

## algorithm [🔝](#weekly-90)

### 1. 两个线程交替打印1-100之间的奇数和偶数

> [print_event_odd.go](../code/print_event_odd.go)

```go
package main

import (
	"fmt"
	"sync"
)

func main() {
	var wg sync.WaitGroup
	ch := make(chan int)
	wg.Add(2)
	go func() {
		defer wg.Done()
		for i := 0; i < 100; i++ {
			if i%2 == 0 {
				fmt.Println("thread1: ", i)
			}
			ch <- 1
		}
	}()

	go func() {
		defer wg.Done()
		for i := 0; i < 100; i++ {
			if i%2 == 1 {
				fmt.Println("thread2: ", i)
			}
			<-ch
		}
	}()
	wg.Wait()
}
```

### 2. N个线程交替打印1-100

> [print_event_odd_n.go](../code/print_event_odd_n.go)

```go
package main

import (
	"fmt"
)

func main() {
	print(5)
}

func print(num int) {
	var chanSlice []chan int
	for i := 0; i < num; i++ {
		chanSlice = append(chanSlice, make(chan int))
	}
	quitChan := make(chan int)

	res := 1
	next := 0
	for i := 0; i < num; i++ {
		go func(i int) {
			for {
				<-chanSlice[i]
				if res > 100 {
					quitChan <- 1
					return
				}
				fmt.Println("thread", i, res)
				res++

				if next == num-1 {
					next = 0
				} else {
					next++
				}
				chanSlice[next] <- 1
			}

		}(i)
	}
	chanSlice[0] <- 1
	select {
	case <-quitChan:
		fmt.Println("exit")
	}

}
```

## review [🔝](#weekly-90)

## tip [🔝](#weekly-90)

## share [🔝](#weekly-90)

[readme](../README.md) | [previous](202411W3.md) | [next](202412W1.md)
