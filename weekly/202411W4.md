> @Author  : Lewis Tian (taseikyo@gmail.com)
>
> @Link    : github.com/taseikyo
>
> @Range   : 2024-11-24 - 2024-11-30

# Weekly #90

[readme](../README.md) | [previous](202411W3.md) | [next](202412W1.md)

![](../images/2024/11/fatma-sonmez-zF-ZOyuL_is-unsplash.jpg "Weekly #90")

\**Photo by [Fatma SÃ¶nmez](https://unsplash.com/@fsonmez) on [Unsplash](https://unsplash.com/photos/a-beach-filled-with-lots-of-sea-shells-under-a-cloudy-sky-zF-ZOyuL_is)*

## Table of Contents

- [algorithm](#algorithm-)
	- ä¸¤ä¸ªçº¿ç¨‹äº¤æ›¿æ‰“å°1-100ä¹‹é—´çš„å¥‡æ•°å’Œå¶æ•°
	- Nä¸ªçº¿ç¨‹äº¤æ›¿æ‰“å°1-100
- [review](#review-)
	- Kafka æž¶æž„çš„æ¼”å˜ï¼šä»Ž ZooKeeper åˆ° KRaftï¼ˆè‹±æ–‡ï¼‰
	- æž„å»ºé«˜æ€§èƒ½è½¯ä»¶ç³»ç»Ÿï¼šæž¶æž„é£Žæ ¼ä¸ŽæŠ€æœ¯æŒ‡å—ï¼ˆè‹±æ–‡ï¼‰
- [tip](#tip-)
- [share](#share-)
	- æ°´åå¼ç»è¥æ³•

## algorithm [ðŸ”](#weekly-90)

### 1. ä¸¤ä¸ªçº¿ç¨‹äº¤æ›¿æ‰“å°1-100ä¹‹é—´çš„å¥‡æ•°å’Œå¶æ•°

> [print_event_odd.go](../code/print_event_odd.go)

```go
package main

import (
	"fmt"
	"sync"
)

func main() {
	var wg sync.WaitGroup
	ch := make(chan int)
	wg.Add(2)
	go func() {
		defer wg.Done()
		for i := 0; i < 100; i++ {
			if i%2 == 0 {
				fmt.Println("thread1: ", i)
			}
			ch <- 1
		}
	}()

	go func() {
		defer wg.Done()
		for i := 0; i < 100; i++ {
			if i%2 == 1 {
				fmt.Println("thread2: ", i)
			}
			<-ch
		}
	}()
	wg.Wait()
}
```

### 2. Nä¸ªçº¿ç¨‹äº¤æ›¿æ‰“å°1-100

> [print_event_odd_n.go](../code/print_event_odd_n.go)

```go
package main

import (
	"fmt"
)

func main() {
	print(5)
}

func print(num int) {
	var chanSlice []chan int
	for i := 0; i < num; i++ {
		chanSlice = append(chanSlice, make(chan int))
	}
	quitChan := make(chan int)

	res := 1
	next := 0
	for i := 0; i < num; i++ {
		go func(i int) {
			for {
				<-chanSlice[i]
				if res > 100 {
					quitChan <- 1
					return
				}
				fmt.Println("thread", i, res)
				res++

				if next == num-1 {
					next = 0
				} else {
					next++
				}
				chanSlice[next] <- 1
			}

		}(i)
	}
	chanSlice[0] <- 1
	select {
	case <-quitChan:
		fmt.Println("exit")
	}

}
```

## review [ðŸ”](#weekly-90)

### 1. [Kafka æž¶æž„çš„æ¼”å˜ï¼šä»Ž ZooKeeper åˆ° KRaftï¼ˆè‹±æ–‡ï¼‰](https://medium.com/@romanglushach/the-evolution-of-kafka-architecture-from-zookeeper-to-kraft-f42d511ba242)

Kafka çš„æž¶æž„æœ€è¿‘ä»Ž ZooKeeper è½¬å˜ä¸ºåŸºäºŽ quorum çš„æŽ§åˆ¶å™¨ï¼Œè¯¥æŽ§åˆ¶å™¨ä½¿ç”¨ä¸€ç§ç§°ä¸º Kafka Raftï¼ˆç®€ç§° KRaftï¼‰çš„æ–°å…±è¯†åè®®ã€‚ä»Ž ZooKeeper åˆ° KRaft çš„è½¬å˜æ˜¯ä¸€æ¬¡é‡å¤§çš„æž¶æž„æ”¹é©ï¼Œä»Žè€Œç®€åŒ–äº†éƒ¨ç½²ã€å¢žå¼ºäº†å¯æ‰©å±•æ€§å¹¶æé«˜äº†æ€§èƒ½ã€‚

1ã€ZooKeeper

åœ¨ZooKeeperæ¨¡å¼ï¼ˆZKï¼‰ä¸­ï¼ŒZooKeeperé›†ç¾¤ä½œä¸ºåè°ƒæœåŠ¡ï¼Œå…¶ä¸­ä¸€ä¸ªZKèŠ‚ç‚¹ä½œä¸ºé¢†å¯¼è€…ï¼ˆleaderï¼‰ï¼Œå…¶ä»–èŠ‚ç‚¹ä½œä¸ºè·Ÿéšè€…ï¼ˆfollowersï¼‰ã€‚ZKé¢†å¯¼è€…ä¼šä»ŽKafkaä»£ç†ï¼ˆbrokersï¼‰ä¸­é€‰æ‹©ä¸€ä¸ªæŽ§åˆ¶å™¨ï¼ˆcontrollerï¼‰ï¼Œå¹¶å°†Kafkaé›†ç¾¤çš„å…ƒæ•°æ®ï¼ˆmetadataï¼‰ä¸Žè·Ÿéšè€…å…±äº«ã€‚

![](../images/2024/11/1_m_1BcbjqeJmUzWITuUV3uQ.jpg)

ZooKeeper æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå®ƒä»¥ç±»ä¼¼äºŽæ ‡å‡†æ–‡ä»¶ç³»ç»Ÿçš„å±‚æ¬¡ç»“æž„å‘½åç©ºé—´æ¥ç»„ç»‡æ•°æ®ã€‚å‘½åç©ºé—´ç”±ç§°ä¸º znode çš„æ•°æ®å¯„å­˜å™¨ç»„æˆã€‚æ¯ä¸ª znode é€šè¿‡è·¯å¾„æ ‡è¯†ï¼Œè·¯å¾„æ˜¯ç”±æ–œæ åˆ†éš”çš„ä¸€ç³»åˆ—è·¯å¾„å…ƒç´ ã€‚

ZooKeeperåœ¨å…¶å‘½åç©ºé—´ä¸­æ”¯æŒä¸‰ç§ç±»åž‹çš„znodesï¼š

- æŒä¹…èŠ‚ç‚¹ï¼ˆPersistentï¼‰ï¼šè¿™æ˜¯é»˜è®¤ç±»åž‹ï¼ŒèŠ‚ç‚¹ä¼šä¸€ç›´å­˜åœ¨äºŽZooKeeperä¸­ï¼Œç›´åˆ°è¢«æ˜¾å¼åˆ é™¤ã€‚
- ä¸´æ—¶èŠ‚ç‚¹ï¼ˆEphemeralï¼‰ï¼šè¿™ç§ç±»åž‹çš„èŠ‚ç‚¹åœ¨åˆ›å»ºå®ƒçš„ä¼šè¯æ–­å¼€æ—¶ä¼šè¢«è‡ªåŠ¨åˆ é™¤ã€‚ä¸´æ—¶èŠ‚ç‚¹ä¸èƒ½æ‹¥æœ‰å­èŠ‚ç‚¹ã€‚
- é¡ºåºèŠ‚ç‚¹ï¼ˆSequentialï¼‰ï¼šè¿™ç§ç±»åž‹çš„èŠ‚ç‚¹ä¼šåœ¨åˆ›å»ºæ—¶è¢«åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„é¡ºåºç¼–å·ï¼ˆå¦‚IDï¼‰ï¼Œé€šå¸¸ç”¨äºŽç”Ÿæˆæœ‰åºçš„åºåˆ—å·ã€‚

ZooKeeper æä¾›äº†ä¸€ä¸ªå¯é ã€å¿«é€Ÿä¸”å…·æœ‰å¯æ‰©å±•æ€§çš„ç³»ç»Ÿã€‚å®ƒè¢«è®¾è®¡ä¸ºåœ¨ä¸€ç»„ç§°ä¸ºâ€œé›†ç¾¤â€ï¼ˆensembleï¼‰çš„æœåŠ¡å™¨ä¸Šè¿›è¡Œå¤åˆ¶ã€‚æ¯å°æœåŠ¡å™¨éƒ½ç»´æŠ¤ä¸€ä¸ªå†…å­˜ä¸­çš„çŠ¶æ€é•œåƒï¼ŒåŒæ—¶è¿˜ä¼šå°†çŠ¶æ€è½¬æ¢æ—¥å¿—å’Œå¿«ç…§å­˜å‚¨åœ¨æŒä¹…åŒ–å­˜å‚¨ä¸­ã€‚

ZooKeeper å®¢æˆ·ç«¯ä¼šè¿žæŽ¥åˆ°ä¸€å°æœåŠ¡å™¨ï¼Œä½†å¦‚æžœè¯¥æœåŠ¡å™¨ä¸å¯ç”¨ï¼Œå®¢æˆ·ç«¯å¯ä»¥åˆ‡æ¢åˆ°å¦ä¸€å°æœåŠ¡å™¨ã€‚è¯»å–è¯·æ±‚ç”±æ¯å°æœåŠ¡å™¨çš„æœ¬åœ°å‰¯æœ¬æ•°æ®åº“æä¾›æœåŠ¡ã€‚å†™å…¥è¯·æ±‚åˆ™é€šè¿‡ä¸€ç§åè®®è¿›è¡Œå¤„ç†ã€‚è¯¥åè®®æ¶‰åŠå°†æ‰€æœ‰å†™å…¥è¯·æ±‚è½¬å‘åˆ°é¢†å¯¼è€…æœåŠ¡å™¨ï¼ˆleader serverï¼‰ï¼Œé¢†å¯¼è€…æœåŠ¡å™¨ä½¿ç”¨ ZooKeeper åŽŸå­å¹¿æ’­åè®®ï¼ˆZAB åè®®ï¼‰æ¥åè°ƒè¿™äº›è¯·æ±‚ã€‚

ZAB åè®®æ˜¯ ZooKeeper çš„æ ¸å¿ƒï¼Œå®ƒç¡®ä¿æ‰€æœ‰æœåŠ¡å™¨ä¿æŒåŒæ­¥ã€‚å®ƒä¿è¯äº†æ¶ˆæ¯çš„å¯é ä¼ é€’ï¼ŒåŒæ—¶è¿˜ç¡®ä¿æ¶ˆæ¯ä»¥å®Œå…¨é¡ºåºå’Œå› æžœé¡ºåºä¼ é€’ã€‚è¯¥åè®®åˆ©ç”¨ TCP è¿›è¡Œé€šä¿¡ï¼Œå¹¶åœ¨æœåŠ¡å™¨ä¹‹é—´å»ºç«‹ç‚¹å¯¹ç‚¹çš„ FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰é€šé“ã€‚


2ã€Kafka

Kafka æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œæä¾›é«˜å¯ç”¨æ€§å’Œå®¹é”™èƒ½åŠ›ã€‚ç„¶è€Œï¼Œå®ƒéœ€è¦ä¸€ç§æ–¹å¼æ¥åè°ƒæ´»è·ƒçš„ Brokerï¼Œå¹¶ä¿æŒé›†ç¾¤åŠå…¶é…ç½®çš„ä¸€è‡´æ€§è§†å›¾ã€‚

é•¿æœŸä»¥æ¥ï¼ŒKafka ä¸€ç›´ä½¿ç”¨ ZooKeeper ä½œä¸ºå…¶å…ƒæ•°æ®ç®¡ç†å·¥å…·ï¼Œæ‰§è¡Œä»¥ä¸‹å‡ ä¸ªå…³é”®åŠŸèƒ½ï¼š

- æŽ§åˆ¶å™¨é€‰ä¸¾ï¼ˆController Electionï¼‰ï¼šZooKeeper å¯¹äºŽé€‰ä¸¾æŽ§åˆ¶å™¨è‡³å…³é‡è¦ã€‚æ¯ä¸ª Broker éƒ½ä¼šå°è¯•åœ¨ ZooKeeper ä¸­åˆ›å»ºä¸€ä¸ªä¸´æ—¶èŠ‚ç‚¹ã€‚ç¬¬ä¸€ä¸ªæˆåŠŸçš„ Broker å°†æˆä¸ºæŽ§åˆ¶å™¨ï¼Œå¹¶èŽ·å¾—ä¸€ä¸ªæŽ§åˆ¶å™¨çºªå…ƒï¼ˆcontroller epochï¼‰ã€‚
- é›†ç¾¤æˆå‘˜ç®¡ç†ï¼ˆCluster Membershipï¼‰ï¼šZooKeeper è¿˜å¸®åŠ©ç®¡ç†é›†ç¾¤ä¸­çš„ Broker æˆå‘˜èµ„æ ¼ã€‚å½“ Broker è¿žæŽ¥åˆ° ZooKeeper å®žä¾‹æ—¶ï¼Œä¼šåœ¨ä¸€ä¸ªç»„ znode ä¸‹åˆ›å»ºä¸€ä¸ªä¸´æ—¶ znodeã€‚å¦‚æžœ Broker å‘ç”Ÿæ•…éšœï¼Œè¯¥ä¸´æ—¶ znode å°†è¢«åˆ é™¤ã€‚
- ä¸»é¢˜é…ç½®ï¼ˆTopic Configurationï¼‰ï¼šKafka å°†æ¯ä¸ªä¸»é¢˜çš„é…ç½®é›†å­˜å‚¨åœ¨ ZooKeeper ä¸­ã€‚è¿™äº›é…ç½®å¯ä»¥æ˜¯ç‰¹å®šäºŽæ¯ä¸ªä¸»é¢˜çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¨å±€çš„ã€‚å®ƒè¿˜å­˜å‚¨è¯¸å¦‚çŽ°æœ‰ä¸»é¢˜åˆ—è¡¨ã€æ¯ä¸ªä¸»é¢˜çš„åˆ†åŒºæ•°é‡ä»¥åŠå‰¯æœ¬ä½ç½®ç­‰ä¿¡æ¯ã€‚
- è®¿é—®æŽ§åˆ¶åˆ—è¡¨ï¼ˆACLsï¼‰ï¼šKafka å°†æ‰€æœ‰ä¸»é¢˜çš„ ACL å­˜å‚¨åœ¨ ZooKeeper ä¸­ã€‚è¿™å†³å®šäº†è°æˆ–ä»€ä¹ˆå¯ä»¥è¯»å–æˆ–å†™å…¥æ¯ä¸ªä¸»é¢˜ã€‚å®ƒè¿˜å­˜å‚¨è¯¸å¦‚æ¶ˆè´¹è€…ç»„åˆ—è¡¨å’Œæ¯ä¸ªæ¶ˆè´¹è€…ç»„æˆå‘˜çš„ä¿¡æ¯ã€‚
- é…é¢ï¼ˆQuotasï¼‰ï¼šKafka Broker å¯ä»¥é™åˆ¶å®¢æˆ·ç«¯ä½¿ç”¨çš„ Broker èµ„æºã€‚è¿™äº›é…é¢å­˜å‚¨åœ¨ ZooKeeper ä¸­ã€‚æœ‰ä¸¤ç§ç±»åž‹çš„é…é¢ï¼šåŸºäºŽå­—èŠ‚é€ŸçŽ‡é˜ˆå€¼çš„ç½‘ç»œå¸¦å®½é…é¢å’ŒåŸºäºŽ CPU åˆ©ç”¨çŽ‡é˜ˆå€¼çš„è¯·æ±‚é€ŸçŽ‡é…é¢ã€‚

3ã€å›°éš¾ä¸ŽæŒ‘æˆ˜

- å¯æ‰©å±•æ€§ï¼ˆScalabilityï¼‰ï¼šZooKeeper å¹¶ä¸æ˜¯ä¸ºå¤„ç†å¤§é‡å®¢æˆ·ç«¯æˆ–è¯·æ±‚è€Œè®¾è®¡çš„ã€‚éšç€ Kafka é›†ç¾¤è§„æ¨¡å’Œæµé‡çš„å¢žé•¿ï¼ŒZooKeeper å¯èƒ½æˆä¸ºç“¶é¢ˆï¼Œå½±å“ Kafka çš„æ€§èƒ½å’Œå¯ç”¨æ€§ã€‚
- å¤æ‚æ€§ï¼ˆComplexityï¼‰ï¼šZooKeeper å¢žåŠ äº† Kafka æž¶æž„çš„å¤æ‚æ€§å’Œä¾èµ–æ€§ã€‚Kafka ç”¨æˆ·å’Œè¿ç»´äººå‘˜å¿…é¡»å•ç‹¬å®‰è£…ã€é…ç½®ã€ç›‘æŽ§å’ŒæŽ’æŸ¥ ZooKeeper çš„é—®é¢˜ã€‚æ­¤å¤–ï¼ŒZooKeeper æœ‰è‡ªå·±çš„é…ç½®å‚æ•°ã€æ•…éšœåœºæ™¯å’Œå®‰å…¨æœºåˆ¶ï¼Œä¸Ž Kafka ä¸åŒã€‚
- ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ï¼šZooKeeper ä¿è¯å¼ºä¸€è‡´æ€§ï¼Œè¿™æ„å‘³ç€é›†ç¾¤ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹åœ¨ä»»ä½•ç»™å®šæ—¶é—´éƒ½èƒ½çœ‹åˆ°ç›¸åŒçš„æ•°æ®è§†å›¾ã€‚ç„¶è€Œï¼Œè¿™ä¹Ÿæ„å‘³ç€ ZooKeeper éœ€è¦å¤§å¤šæ•°èŠ‚ç‚¹ï¼ˆquorumï¼‰å¯ç”¨æ‰èƒ½å¤„ç†ä»»ä½•è¯·æ±‚ã€‚å¦‚æžœæ— æ³•è¾¾åˆ°å¤šæ•°ï¼ŒZooKeeper å°†æ— æ³•å¤„ç†è¯·æ±‚å¹¶å˜å¾—ä¸å¯ç”¨ã€‚è¿™ä¹Ÿä¼šå½±å“ Kafka çš„å¯ç”¨æ€§ï¼Œå°¤å…¶æ˜¯åœ¨ç½‘ç»œåˆ†åŒºæˆ–æ•°æ®ä¸­å¿ƒæ•…éšœçš„æƒ…å†µä¸‹ã€‚
- å¤æ‚ä¸”éš¾ä»¥ç®¡ç†ï¼šZooKeeper çš„å¼•å…¥å¢žåŠ äº† Kafka ç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œä½¿å…¶æ›´éš¾ä»¥ç®¡ç†ã€‚
- å¼•å…¥ç“¶é¢ˆï¼šZooKeeper åœ¨æ´»è·ƒçš„ Kafka æŽ§åˆ¶å™¨å’Œ ZooKeeper é¢†å¯¼è€…ä¹‹é—´å¼•å…¥äº†ç“¶é¢ˆã€‚
- å…ƒæ•°æ®å˜æ›´å’Œæ•…éšœè½¬ç§»è¾ƒæ…¢ï¼šå…ƒæ•°æ®å˜æ›´ï¼ˆæ›´æ–°ï¼‰å’Œæ•…éšœè½¬ç§»çš„é€Ÿåº¦è¾ƒæ…¢ã€‚


4ã€KRaft

KRaft æ˜¯ Kafka Raft Metadata æ¨¡å¼çš„ç¼©å†™ï¼Œæ„å‘³ç€ Kafka ä½¿ç”¨ Raft å…±è¯†åè®®æ¥ç®¡ç†è‡ªå·±çš„å…ƒæ•°æ®ï¼Œè€Œä¸å†ä¾èµ– ZooKeeperã€‚

![](../images/2024/11/1_DKXJ3Ro0_l4Vh6C7Aga4RQ.jpg)

æœ€åˆçš„ Kafka æž¶æž„ä¾èµ– ZooKeeper æ¥ç®¡ç†é›†ç¾¤çš„å…ƒæ•°æ®ã€‚ç„¶è€Œï¼ŒZooKeeper ä¸º Kafka å¼•å…¥äº†ä¸€äº›å¤æ‚æ€§å’Œé™åˆ¶ã€‚å› æ­¤ï¼Œä¸€ç³»åˆ— Kafka æ”¹è¿›ææ¡ˆï¼ˆKIPsï¼‰è¢«æå‡ºï¼Œæ—¨åœ¨ç”¨è‡ªç®¡ç†çš„å…ƒæ•°æ®ä»²è£ï¼ˆquorumï¼‰å–ä»£ ZooKeeperã€‚è¯¥è‡ªç®¡ç†æ¨¡å¼çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ä½œä¸ºæ—©æœŸè®¿é—®åŠŸèƒ½åœ¨ Kafka 2.8 ä¸­å‘å¸ƒã€‚

è‡ªç®¡ç†æ¨¡å¼é€šè¿‡å°†å…ƒæ•°æ®ç®¡ç†å§”æ‰˜ç»™ Kafka ä¸­çš„æ–°ä»²è£æŽ§åˆ¶å™¨æœåŠ¡ï¼ˆquorum controller serviceï¼‰æ¥ç®€åŒ–å…ƒæ•°æ®ç®¡ç†ã€‚ä»²è£æŽ§åˆ¶å™¨é‡‡ç”¨äº‹ä»¶æºå­˜å‚¨æ¨¡åž‹ï¼Œå¹¶ä½¿ç”¨ Kafka Raftï¼ˆKRaftï¼‰ä½œä¸ºå…±è¯†åè®®ï¼Œä»¥ç¡®ä¿å…ƒæ•°æ®åœ¨ä»²è£ä¸­çš„ä¸€è‡´æ€§å’ŒæŒä¹…æ€§ã€‚

KRaft æ˜¯åŸºäºŽäº‹ä»¶çš„ Raft å…±è¯†åè®®çš„å®žçŽ°ï¼Œç±»ä¼¼äºŽ ZooKeeper ä½¿ç”¨çš„ ZAB åè®®ï¼Œä½†é‡‡ç”¨äº†äº‹ä»¶é©±åŠ¨çš„è®¾è®¡ã€‚ä»²è£æŽ§åˆ¶å™¨ç»´æŠ¤ä¸€ä¸ªäº‹ä»¶æ—¥å¿—æ¥å­˜å‚¨çŠ¶æ€è½¬æ¢ï¼Œè¿™äº›æ—¥å¿—ä¼šå®šæœŸåŽ‹ç¼©ä¸ºå¿«ç…§ï¼Œä»¥é¿å…æ— é™å¢žé•¿ã€‚

ä»²è£æŽ§åˆ¶å™¨ä»¥é¢†å¯¼è€…-è¿½éšè€…æ¨¡å¼è¿è¡Œï¼Œé¢†å¯¼è€…æŽ§åˆ¶å™¨åœ¨ Kafka çš„å…ƒæ•°æ®ä¸»é¢˜ä¸­ç”Ÿæˆäº‹ä»¶ï¼Œè€Œè¿½éšè€…æŽ§åˆ¶å™¨æ¶ˆè´¹å¹¶åº”ç”¨è¿™äº›äº‹ä»¶ã€‚å¦‚æžœ Broker å‘ç”Ÿæ•…éšœæˆ–æ–­å¼€è¿žæŽ¥ï¼Œå®ƒå¯ä»¥åœ¨é‡æ–°åŠ å…¥æ—¶ä»Žæœ€åŽä¸€ä¸ªæäº¤çš„äº‹ä»¶æ¢å¤ã€‚è¿™æœ€å¤§é™åº¦åœ°å‡å°‘äº†åœæœºæ—¶é—´ã€‚

ä¸ŽåŸºäºŽ ZooKeeper çš„æŽ§åˆ¶å™¨ç›¸æ¯”ï¼Œä»²è£æŽ§åˆ¶å™¨å…·æœ‰ä¸€äº›ä¼˜åŠ¿ï¼Œä¾‹å¦‚ä¸éœ€è¦ä»Žå¤–éƒ¨æœåŠ¡åŠ è½½çŠ¶æ€ï¼Œå¹¶ä¸”æ‰€æœ‰æäº¤çš„å…ƒæ•°æ®è®°å½•éƒ½ä¿å­˜åœ¨å†…å­˜ä¸­ã€‚æ­¤å¤–ï¼Œç›¸åŒçš„äº‹ä»¶é©±åŠ¨æœºåˆ¶ç”¨äºŽåœ¨é›†ç¾¤ä¸­ä¼ æ’­å’ŒåŒæ­¥æ‰€æœ‰å…ƒæ•°æ®å˜æ›´ã€‚

5ã€ä¼˜åŠ¿

- ç®€åŒ–ï¼ˆSimplicityï¼‰ï¼šKRaft é€šè¿‡ç§»é™¤å¯¹ç‹¬ç«‹åè°ƒæœåŠ¡çš„éœ€æ±‚ï¼Œç®€åŒ–äº† Kafka çš„æž¶æž„ã€‚Kafka ç”¨æˆ·å’Œè¿ç»´äººå‘˜åªéœ€å¤„ç†ä¸€ä¸ªç³»ç»Ÿï¼Œè€Œä¸æ˜¯ä¸¤ä¸ªã€‚æ­¤å¤–ï¼ŒKRaft ä½¿ç”¨ä¸Ž Kafka æ•°æ®å¹³é¢ç›¸åŒçš„é…ç½®å‚æ•°ã€æ•…éšœåœºæ™¯å’Œå®‰å…¨æœºåˆ¶ï¼Œä»Žè€Œé™ä½Žäº†å­¦ä¹ æ›²çº¿å’Œè¿ç»´å¼€é”€ã€‚
- å¯æ‰©å±•æ€§ï¼ˆScalabilityï¼‰ï¼šKRaft é€šè¿‡å‡å°‘å…ƒæ•°æ®å­˜å‚¨çš„è´Ÿè½½æ¥æé«˜ Kafka çš„å¯æ‰©å±•æ€§ã€‚åœ¨ KRaft æ¨¡å¼ä¸‹ï¼Œåªæœ‰æŽ§åˆ¶å™¨ä»²è£ï¼ˆä¸€ç»„ Broker å­é›†ï¼‰å‚ä¸Ž Raft åè®®ï¼Œè€Œå…¶ä½™ Broker ä»…ä¸ŽæŽ§åˆ¶å™¨ä»²è£é€šä¿¡ã€‚è¿™å‡å°‘äº†å¿…é¡»é€šè¿‡å…ƒæ•°æ®å­˜å‚¨çš„è¿žæŽ¥å’Œè¯·æ±‚æ•°é‡ï¼Œä½¿ Kafka èƒ½å¤Ÿåœ¨ä¸å½±å“å…ƒæ•°æ®å­˜å‚¨æ€§èƒ½å’Œå¯ç”¨æ€§çš„æƒ…å†µä¸‹å¤„ç†æ›´å¤šçš„ Broker å’Œä¸»é¢˜ã€‚
- å¯ç”¨æ€§ï¼ˆAvailabilityï¼‰ï¼šKRaft é€šè¿‡å…è®¸å…ƒæ•°æ®å­˜å‚¨éƒ¨åˆ†æ•…éšœæ¥æé«˜ Kafka çš„å¯ç”¨æ€§ã€‚åœ¨ KRaft æ¨¡å¼ä¸‹ï¼Œåªéœ€è¦ä»²è£æŽ§åˆ¶å™¨æ¥å¤„ç†ä»»ä½•è¯·æ±‚ã€‚å¦‚æžœæŸäº›æŽ§åˆ¶å™¨ä¸å¯ç”¨æˆ–ä¸Žé›†ç¾¤çš„å…¶ä»–éƒ¨åˆ†åˆ†åŒºï¼Œå‰©ä½™çš„æŽ§åˆ¶å™¨ä»ç„¶å¯ä»¥å¤„ç†è¯·æ±‚å¹¶ç»´æŠ¤é›†ç¾¤çŠ¶æ€ã€‚è¿™æé«˜äº† Kafka å¯¹ç½‘ç»œåˆ†åŒºå’Œæ•°æ®ä¸­å¿ƒæ•…éšœçš„å¼¹æ€§ã€‚
- ç®€åŒ–çš„éƒ¨ç½²å’Œç®¡ç†ï¼šKafka ç”¨æˆ·ä¸å†éœ€è¦è¿è¡Œå’Œç»´æŠ¤ç‹¬ç«‹çš„ ZooKeeper é›†ç¾¤ï¼Œä»Žè€Œé™ä½Žäº† Kafka éƒ¨ç½²çš„è¿ç»´å¤æ‚æ€§å’Œæˆæœ¬ã€‚æ­¤å¤–ï¼ŒKafka ç”¨æˆ·å¯ä»¥åˆ©ç”¨çŽ°æœ‰çš„å·¥å…·å’Œ API æ¥ç®¡ç† Kafka é›†ç¾¤ï¼Œä¾‹å¦‚ Admin APIã€Config API å’Œ kafka-reassign-partitions å·¥å…·ã€‚
- å¢žå¼ºçš„å®‰å…¨æ€§ï¼šKRaft æ”¯æŒä½¿ç”¨ SSL/TLS æˆ– SASL æœºåˆ¶å¯¹å®¢æˆ·ç«¯-æœåŠ¡å™¨é€šä¿¡è¿›è¡ŒåŠ å¯†å’Œèº«ä»½éªŒè¯ï¼Œä»Žè€Œä¿æŠ¤ Kafka å…ƒæ•°æ®å…å—æœªç»æŽˆæƒçš„è®¿é—®æˆ–ä¿®æ”¹ã€‚

6ã€æƒè¡¡

å…¼å®¹æ€§ï¼ˆCompatibilityï¼‰ï¼šKRaft ä¸Žæ—§ç‰ˆæœ¬çš„ Kafka æˆ– ZooKeeper ä¸å…¼å®¹ã€‚å¸Œæœ›ä»Ž ZooKeeper è¿ç§»åˆ° KRaft çš„ç”¨æˆ·å¿…é¡»éµå¾ªç‰¹å®šçš„æµç¨‹ï¼ŒåŒ…æ‹¬å‡çº§å…¶ Broker å’Œå®¢æˆ·ç«¯ä»¥æ”¯æŒ KRaft æ¨¡å¼ï¼Œå°†å…¶å…ƒæ•°æ®ä»Ž ZooKeeper æ ¼å¼è½¬æ¢ä¸º KRaft æ ¼å¼ï¼Œå¹¶å°†å…¶ Broker ä»Ž ZooKeeper æ¨¡å¼åˆ‡æ¢åˆ° KRaft æ¨¡å¼ã€‚è¿™å¯èƒ½æ˜¯ä¸€ä¸ªå¤æ‚ä¸”å…·æœ‰é£Žé™©çš„è¿‡ç¨‹ï¼Œéœ€è¦ä»”ç»†è§„åˆ’å’Œæµ‹è¯•ã€‚

ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ï¼šKRaft é€šè¿‡åœ¨æŸäº›æƒ…å†µä¸‹å…è®¸æœ€ç»ˆä¸€è‡´æ€§æ¥æ”¾å®½ ZooKeeper çš„å¼ºä¸€è‡´æ€§ä¿è¯ã€‚ä¾‹å¦‚ï¼Œå¦‚æžœæŽ§åˆ¶å™¨å‘ç”Ÿæ•…éšœæˆ–ç¦»å¼€é›†ç¾¤ï¼Œå¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´æ‰èƒ½è®©å¦ä¸€ä¸ªæŽ§åˆ¶å™¨æŽ¥ç®¡å…¶è§’è‰²å¹¶æ›´æ–°å…¶å¯¹é›†ç¾¤çŠ¶æ€çš„è§†å›¾ã€‚åœ¨æ­¤æœŸé—´ï¼ŒæŸäº› Broker æˆ–å®¢æˆ·ç«¯å¯èƒ½ä¼šçœ‹åˆ°è¿‡æ—¶æˆ–ä¸ä¸€è‡´çš„å…ƒæ•°æ®ï¼Œç›´åˆ°å®ƒä»¬åˆ·æ–°ç¼“å­˜æˆ–é‡æ–°è¿žæŽ¥åˆ°æ–°çš„æŽ§åˆ¶å™¨ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´æŸäº›æ“ä½œï¼ˆå¦‚åˆ›å»ºæˆ–åˆ é™¤ä¸»é¢˜ã€é‡æ–°åˆ†é…åˆ†åŒºæˆ–æäº¤åç§»é‡ï¼‰å‡ºçŽ°ä¸´æ—¶é”™è¯¯æˆ–ä¸ä¸€è‡´ã€‚

7ã€ä»Ž ZooKeeper è¿ç§»åˆ° KRaft

ä»Ž ZooKeeper è¿ç§»åˆ° KRaft æ˜¯ä¸€ä¸ªç›´æŽ¥çš„è¿‡ç¨‹ï¼Œæ¶‰åŠå‡çº§åˆ° Kafka 2.8 æˆ–æ›´é«˜ç‰ˆæœ¬å¹¶å¯ç”¨ KRaft æ¨¡å¼ã€‚è‡ª 2019 å¹´ 8 æœˆä»¥æ¥ï¼ŒKafka ç»åŽ†äº†ç”± Collin McCabe æå‡ºçš„ KIP-500 çš„é‡å¤§æž¶æž„æ”¹é©ï¼Œè¯¥ææ¡ˆç§»é™¤äº† Kafka å¯¹ ZooKeeper çš„ä¾èµ–ï¼Œè½¬è€Œä½¿ç”¨è‡ªç®¡ç†çš„å…ƒæ•°æ®ä»²è£ã€‚è¿™å¯¼è‡´äº† KRaft æ¨¡å¼çš„å¼€å‘ï¼Œè¯¥æ¨¡å¼çŽ°å·²è¢«æ ‡è®°ä¸ºç”Ÿäº§å°±ç»ªã€‚æˆªè‡³ Kafka 3.5ï¼ŒZooKeeper æ¨¡å¼å·²è¢«å¼ƒç”¨ï¼Œå¹¶å°†åœ¨ Kafka 4.0 å‘å¸ƒæ—¶å®Œå…¨ç§»é™¤ã€‚

Kafka ä»Ž ZooKeeper åˆ° KRaft çš„è½¬å˜æ˜¯ä¸€æ¬¡é‡å¤§çš„æž¶æž„æ”¹é©ï¼Œç®€åŒ–äº†éƒ¨ç½²ï¼Œå¢žå¼ºäº†å¯æ‰©å±•æ€§ï¼Œå¹¶æé«˜äº†æ€§èƒ½ã€‚KRaft æ¨¡å¼æ¶ˆé™¤äº†å¯¹ç‹¬ç«‹ ZooKeeper é›†ç¾¤çš„éœ€æ±‚ï¼Œä½¿ Kafka é›†ç¾¤çš„éƒ¨ç½²å’Œç®¡ç†æ›´åŠ å®¹æ˜“ã€‚

KRaft æ¨¡å¼æ¯” ZooKeeper æ¨¡å¼æ›´å…·å¯æ‰©å±•æ€§ï¼Œå…è®¸ Kafka é›†ç¾¤å¤„ç†æ›´å¤šçš„æµé‡å’Œæ•°æ®ã€‚KRaft æ¨¡å¼æ¯” ZooKeeper æ¨¡å¼æ›´å¿«ï¼Œä»Žè€Œé™ä½Žäº†å»¶è¿Ÿå¹¶æé«˜äº†åžåé‡ã€‚

### 2. [æž„å»ºé«˜æ€§èƒ½è½¯ä»¶ç³»ç»Ÿï¼šæž¶æž„é£Žæ ¼ä¸ŽæŠ€æœ¯æŒ‡å—ï¼ˆè‹±æ–‡ï¼‰](https://romanglushach.medium.com/building-high-performing-software-systems-a-guide-to-architectural-styles-and-techniques-00dc89e08147)

é«˜æ€§èƒ½è½¯ä»¶ç³»ç»Ÿæ˜¯æŒ‡è¡¨çŽ°å‡ºå“è¶Šæ€§èƒ½ã€å¯æ‰©å±•æ€§ã€å¯é æ€§å’Œå®‰å…¨æ€§çš„åº”ç”¨ç¨‹åºæˆ–ç³»ç»Ÿã€‚è¿™äº›ç³»ç»Ÿæ—¨åœ¨å¤„ç†å¤§é‡æ•°æ®ã€ç”¨æˆ·æµé‡å’Œå¤æ‚è®¡ç®—ï¼ŒåŒæ—¶ä¿æŒæœ€ä½³æ€§èƒ½æ°´å¹³ã€‚é«˜æ€§èƒ½è½¯ä»¶ç³»ç»Ÿå¹¶ä¸å±€é™äºŽä»»ä½•ç‰¹å®šè¡Œä¸šæˆ–é¢†åŸŸï¼Œå®ƒä»¬å¯ä»¥åº”ç”¨äºŽé‡‘èžã€åŒ»ç–—ã€ç”µå­å•†åŠ¡ã€ç¤¾äº¤åª’ä½“ã€äººå·¥æ™ºèƒ½ã€æ•°æ®åˆ†æžå’Œæ¸¸æˆç­‰å¤šä¸ªé¢†åŸŸã€‚

1ã€æž¶æž„é£Žæ ¼

æž¶æž„é£Žæ ¼æ˜¯ä¸€ç»„æŒ‡å¯¼åŽŸåˆ™æˆ–çº¦å®šï¼Œå®šä¹‰äº†å¦‚ä½•æž„å»ºå’Œç»„ç»‡è½¯ä»¶ç³»ç»Ÿã€‚å®ƒæè¿°äº†ç³»ç»Ÿçš„ç»„ä»¶ã€å®ƒä»¬çš„èŒè´£ã€å®ƒä»¬çš„äº¤äº’æ–¹å¼ä»¥åŠå®ƒä»¬çš„ä¾èµ–å…³ç³»ã€‚æž¶æž„é£Žæ ¼è¿˜å®šä¹‰äº†ç³»ç»Ÿçš„ä¸€äº›éžåŠŸèƒ½æ€§æ–¹é¢ï¼Œä¾‹å¦‚å¯æ‰©å±•æ€§ã€æ€§èƒ½ã€å®‰å…¨æ€§ã€å¯æµ‹è¯•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

æž¶æž„é£Žæ ¼å¹¶ä¸æ˜¯ä¸€å¥—å›ºå®šæˆ–ä¸¥æ ¼çš„è§„åˆ™ï¼Œè€Œæ˜¯ä¸€ç§å¯ä»¥é€‚åº”å’Œå®šåˆ¶ä»¥æ»¡è¶³é¡¹ç›®ç‰¹å®šéœ€æ±‚å’Œçº¦æŸçš„é€šç”¨æ–¹æ³•æˆ–ç†å¿µã€‚æ²¡æœ‰ä¸€ç§é€‚ç”¨äºŽæ‰€æœ‰åœºæ™¯çš„æœ€ä½³æˆ–æœ€ä¼˜æž¶æž„é£Žæ ¼ï¼Œè€Œæ˜¯éœ€è¦åœ¨é€‰æ‹©æ—¶è¯„ä¼°ä¸åŒçš„æƒè¡¡å’Œè€ƒè™‘å› ç´ ã€‚

1.1ã€ä¼˜åŠ¿

- **æ¨¡å—åŒ–**ï¼šå°†å¤æ‚ç³»ç»Ÿåˆ†è§£ä¸ºæ›´å°ã€æ›´ç®€å•çš„ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶å¯ä»¥ç‹¬ç«‹å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²å’Œç»´æŠ¤ã€‚
- **å¯é‡ç”¨æ€§**ï¼šé€šè¿‡åˆ›å»ºå¯é‡ç”¨çš„ç»„ä»¶æ¥é¿å…ä»£ç å’Œé€»è¾‘çš„é‡å¤ï¼Œè¿™äº›ç»„ä»¶å¯ä»¥åœ¨ç³»ç»Ÿçš„ä¸åŒéƒ¨åˆ†ç”šè‡³ä¸åŒç³»ç»Ÿä¹‹é—´å…±äº«ã€‚
- **å¯æ‰©å±•æ€§**ï¼šå…è®¸ç³»ç»Ÿé€šè¿‡æ·»åŠ æˆ–ä¿®æ”¹ç»„ä»¶æ¥é€‚åº”ä¸æ–­å˜åŒ–çš„éœ€æ±‚å’Œæ–°åŠŸèƒ½ï¼Œè€Œä¸ä¼šå½±å“çŽ°æœ‰ç»„ä»¶ã€‚
- **å¯æµ‹è¯•æ€§**ï¼šé€šè¿‡éš”ç¦»ç»„ä»¶åŠå…¶ä¾èµ–å…³ç³»ï¼Œå¹¶åœ¨å®ƒä»¬ä¹‹é—´æä¾›æ¸…æ™°çš„æŽ¥å£å’Œå¥‘çº¦ï¼Œä½¿ç³»ç»Ÿæ›´æ˜“äºŽæµ‹è¯•ã€‚
- **å¯ç»´æŠ¤æ€§**ï¼šé€šè¿‡éµå¾ªä¸€è‡´å’Œè¿žè´¯çš„çº¦å®šå’ŒåŽŸåˆ™ï¼Œä½¿ç³»ç»Ÿæ›´æ˜“äºŽç†è§£ã€ä¿®æ”¹ã€è°ƒè¯•å’Œé‡æž„ã€‚
- **è§£è€¦**ï¼šé€šè¿‡æœ€å°åŒ–ç»„ä»¶ä¹‹é—´å…±äº«æˆ–æš´éœ²çš„ä¿¡æ¯å’Œè¡Œä¸ºé‡ï¼Œå‡å°‘ç»„ä»¶ä¹‹é—´çš„è€¦åˆæˆ–ä¾èµ–æ€§ã€‚

2ã€è½¯ä»¶æ€§èƒ½

è½¯ä»¶æ€§èƒ½æ˜¯æŒ‡è½¯ä»¶ç³»ç»Ÿåœ¨ç‰¹å®šæ—¶é—´æ¡†æž¶å†…ä»¥æœ€ä¼˜èµ„æºä½¿ç”¨æ‰§è¡Œå…¶é¢„æœŸåŠŸèƒ½çš„èƒ½åŠ›ã€‚å®ƒæ˜¯è½¯ä»¶å¼€å‘å’Œç»´æŠ¤çš„å…³é”®æ–¹é¢ï¼Œå› ä¸ºå®ƒç›´æŽ¥å½±å“ç”¨æˆ·ä½“éªŒã€ç³»ç»Ÿå¯é æ€§å’Œæ•´ä½“æ•ˆçŽ‡ã€‚

è½¯ä»¶æ€§èƒ½å¯ä»¥å®šä¹‰ä¸ºè½¯ä»¶ç³»ç»Ÿæ‰§è¡Œå…¶é¢„æœŸåŠŸèƒ½å¹¶åœ¨æŒ‡å®šæ—¶é—´æ¡†æž¶å†…å“åº”ç”¨æˆ·è¾“å…¥çš„èƒ½åŠ›çš„åº¦é‡ã€‚

å®ƒåŒ…æ‹¬ä»¥ä¸‹æ–¹é¢ï¼š

- **å“åº”æ—¶é—´**ï¼šç³»ç»Ÿå“åº”ç”¨æˆ·è¾“å…¥æˆ–æŸ¥è¯¢æ‰€éœ€çš„æ—¶é—´ã€‚
- **åžåé‡**ï¼šç³»ç»Ÿåœ¨ç»™å®šæ—¶é—´æ¡†æž¶å†…å¯ä»¥å¤„ç†çš„ä»»åŠ¡æˆ–è¯·æ±‚æ•°é‡ã€‚
- **èµ„æºåˆ©ç”¨çŽ‡**ï¼šç³»ç»Ÿä½¿ç”¨ç¡¬ä»¶å’Œè½¯ä»¶èµ„æºï¼ˆå¦‚CPUã€å†…å­˜ã€ç£ç›˜I/Oå’Œç½‘ç»œå¸¦å®½ï¼‰çš„æ•ˆçŽ‡ã€‚
- **å¯æ‰©å±•æ€§**ï¼šç³»ç»Ÿåœ¨ä¸æ˜¾è‘—é™ä½Žæ€§èƒ½çš„æƒ…å†µä¸‹å¤„ç†å¢žåŠ çš„å·¥ä½œè´Ÿè½½æˆ–ç”¨æˆ·æµé‡çš„èƒ½åŠ›ã€‚
- **å¯é æ€§**ï¼šç³»ç»Ÿä¸€è‡´åœ°æ‰§è¡Œå…¶é¢„æœŸåŠŸèƒ½ä¸”æ— é”™è¯¯æˆ–æ•…éšœçš„èƒ½åŠ›ã€‚

3ã€è½¯ä»¶ç³»ç»Ÿçš„å…³é”®æ€§èƒ½æŒ‡æ ‡ï¼ˆKPIsï¼‰

å…³é”®æ€§èƒ½æŒ‡æ ‡ï¼ˆKPIsï¼‰æ˜¯å¯è¡¡é‡çš„å€¼ï¼Œç”¨äºŽå±•ç¤ºè½¯ä»¶ç³»ç»Ÿå¦‚ä½•æœ‰æ•ˆåœ°å®žçŽ°å…¶é¢„æœŸç›®æ ‡ã€‚

ä¸€äº›å¸¸è§çš„è½¯ä»¶æ€§èƒ½KPIåŒ…æ‹¬ï¼š

- **å“åº”æ—¶é—´**ï¼šå¹³å‡å“åº”æ—¶é—´ã€å“åº”æ—¶é—´å˜å¼‚æ€§å’Œå“åº”æ—¶é—´åˆ†å¸ƒã€‚
- **åžåé‡**ï¼šå•ä½æ—¶é—´å†…å¤„ç†çš„è¯·æ±‚æ•°é‡ï¼Œä¾‹å¦‚æ¯ç§’è¯·æ±‚æ•°ï¼ˆRPSï¼‰æˆ–æ¯åˆ†é’Ÿäº‹åŠ¡æ•°ï¼ˆTPMï¼‰ã€‚
- **èµ„æºåˆ©ç”¨çŽ‡**ï¼šCPUä½¿ç”¨çŽ‡ã€å†…å­˜ä½¿ç”¨çŽ‡ã€ç£ç›˜I/Oã€ç½‘ç»œå¸¦å®½å’Œæ¯ç§’æ•°æ®åº“æŸ¥è¯¢æ•°ã€‚
- **å¯æ‰©å±•æ€§**ï¼šç³»ç»Ÿåœ¨ä¸æ˜¾è‘—æ€§èƒ½ä¸‹é™çš„æƒ…å†µä¸‹å¤„ç†çš„ç”¨æˆ·æ•°é‡ã€å¹¶å‘è¿žæŽ¥æ•°æˆ–è¯·æ±‚æ•°ã€‚
- **å¯é æ€§**ï¼šå¹³å‡æ•…éšœé—´éš”æ—¶é—´ï¼ˆMTBFï¼‰ã€å¹³å‡æ¢å¤æ—¶é—´ï¼ˆMTTRï¼‰å’Œé”™è¯¯çŽ‡ã€‚

4ã€å½±å“è½¯ä»¶æ€§èƒ½çš„å› ç´ 

- **ç¡¬ä»¶èµ„æº**ï¼šç¡¬ä»¶ç»„ä»¶ï¼ˆå¦‚CPUã€å†…å­˜ã€å­˜å‚¨å’Œç½‘ç»œæŽ¥å£ï¼‰çš„å¯ç”¨æ€§ã€åˆ©ç”¨çŽ‡å’Œæ€§èƒ½ã€‚
- **è½¯ä»¶æž¶æž„**ï¼šè½¯ä»¶ç³»ç»Ÿçš„è®¾è®¡å’Œç»“æž„ï¼ŒåŒ…æ‹¬å±‚æ•°ã€ç»„ä»¶æ•°é‡ä»¥åŠå®ƒä»¬ä¹‹é—´çš„äº¤äº’ã€‚
- **ç®—æ³•å¤æ‚åº¦**ï¼šè½¯ä»¶ä¸­ä½¿ç”¨çš„ç®—æ³•çš„æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦ï¼Œè¿™å¯èƒ½ä¼šå½±å“å“åº”æ—¶é—´å’Œèµ„æºåˆ©ç”¨çŽ‡ã€‚
- **æ•°æ®å¤§å°å’Œå¢žé•¿**ï¼šç³»ç»Ÿå¤„ç†å’Œå­˜å‚¨çš„æ•°æ®é‡ï¼Œéšç€æ•°æ®é›†çš„å¢žé•¿ï¼Œå¯èƒ½ä¼šå½±å“æ€§èƒ½ã€‚
- **ç”¨æˆ·è¡Œä¸º**ï¼šç”¨æˆ·æ´»åŠ¨çš„æ¨¡å¼å’Œå¼ºåº¦ï¼Œä¾‹å¦‚å¹¶å‘ç”¨æˆ·æ•°é‡ã€è¯·æ±‚é¢‘çŽ‡å’Œä½¿ç”¨æ¨¡å¼ã€‚
- **ç½‘ç»œå’ŒI/Oæ€§èƒ½**ï¼šç½‘ç»œå»¶è¿Ÿã€æ•°æ®åŒ…ä¸¢å¤±å’ŒI/Oæ“ä½œå¯èƒ½ä¼šå½±å“ç³»ç»Ÿæ£€ç´¢å’Œå¤„ç†æ•°æ®çš„èƒ½åŠ›ã€‚
- **èµ„æºç«žäº‰**ï¼šå¯¹å…±äº«èµ„æºï¼ˆå¦‚CPUã€å†…å­˜å’ŒI/Oè®¾å¤‡ï¼‰çš„ç«žäº‰å¯èƒ½å¯¼è‡´æ€§èƒ½ç“¶é¢ˆã€‚
- **å¹²æ‰°å’Œå™ªå£°**ï¼šæ¥è‡ªå…¶ä»–ç³»ç»Ÿæˆ–åŽå°è¿›ç¨‹çš„å¹²æ‰°ï¼Œä»¥åŠç³»ç»Ÿæ€§èƒ½çš„éšæœºæ³¢åŠ¨ï¼Œå¯èƒ½ä¼šå½±å“è½¯ä»¶æ€§èƒ½ã€‚

5ã€æµ‹é‡å’Œç›‘æŽ§è½¯ä»¶æ€§èƒ½çš„æ–¹æ³•

- **åˆæˆäº‹åŠ¡**ï¼šæ¨¡æ‹Ÿç”¨æˆ·äº¤äº’ä»¥æµ‹é‡å“åº”æ—¶é—´ã€åžåé‡å’Œèµ„æºåˆ©ç”¨çŽ‡ã€‚
- **çœŸå®žç”¨æˆ·ç›‘æŽ§**ï¼šè·Ÿè¸ªå®žé™…ç”¨æˆ·äº¤äº’ï¼Œä»Žæœ€ç»ˆç”¨æˆ·çš„è§’åº¦è¯„ä¼°æ€§èƒ½ã€‚
- **è´Ÿè½½æµ‹è¯•**ï¼šåœ¨ä¸åŒè´Ÿè½½ä¸‹æµ‹è¯•ç³»ç»Ÿï¼Œä»¥è¯„ä¼°å…¶åœ¨ä¸åŒå·¥ä½œè´Ÿè½½ä¸‹çš„å¯æ‰©å±•æ€§å’Œæ€§èƒ½ã€‚
- **åŽ‹åŠ›æµ‹è¯•**ï¼šåœ¨æžç«¯æ¡ä»¶ä¸‹ï¼ˆå¦‚é«˜å¹¶å‘æˆ–å¤§æ•°æ®é›†ï¼‰æµ‹è¯•ç³»ç»Ÿï¼Œä»¥è¯†åˆ«æ€§èƒ½ç“¶é¢ˆã€‚
- **æœ€ç»ˆç”¨æˆ·ä½“éªŒç›‘æŽ§**ï¼šç›‘æŽ§ç”¨æˆ·ä½“éªŒæŒ‡æ ‡ï¼Œä¾‹å¦‚é¡µé¢åŠ è½½æ—¶é—´ã€é”™è¯¯çŽ‡å’Œç”¨æˆ·æ»¡æ„åº¦ã€‚
- **æ€§èƒ½å»ºæ¨¡**ï¼šåˆ›å»ºç³»ç»Ÿçš„æ•°å­¦æ¨¡åž‹ï¼Œä»¥é¢„æµ‹ä¸åŒæ¡ä»¶ä¸‹çš„æ€§èƒ½å¹¶ä¼˜åŒ–ç³»ç»Ÿé…ç½®ã€‚
- **æ€§èƒ½åŸºå‡†æµ‹è¯•**ï¼šå°†ç³»ç»Ÿçš„æ€§èƒ½ä¸Žè¡Œä¸šæ ‡å‡†åŸºå‡†æˆ–ç«žäº‰ç³»ç»Ÿè¿›è¡Œæ¯”è¾ƒã€‚
- **æ ¹æœ¬åŽŸå› åˆ†æž**ï¼šé€šè¿‡åˆ†æžã€è·Ÿè¸ªå’Œæ—¥å¿—è®°å½•ç­‰æŠ€æœ¯è¯†åˆ«æ€§èƒ½é—®é¢˜çš„æ ¹æœ¬åŽŸå› ã€‚

6ã€åº”ç”¨æž¶æž„é£Žæ ¼çš„æ–¹å¼

- **æ•´ä¸ªç³»ç»Ÿ**ï¼šå®šä¹‰ç³»ç»Ÿæ•´ä½“çš„é«˜çº§ç»“æž„å’Œç»„ç»‡ï¼Œä¾‹å¦‚å¦‚ä½•å°†å…¶åˆ’åˆ†ä¸ºå­ç³»ç»Ÿæˆ–æ¨¡å—ï¼Œå®ƒä»¬å¦‚ä½•ç›¸äº’é€šä¿¡ï¼Œä»¥åŠå®ƒä»¬å¦‚ä½•ä¸Žå¤–éƒ¨ç³»ç»Ÿæˆ–æœåŠ¡äº¤äº’ã€‚
- **å­ç³»ç»Ÿæˆ–æ¨¡å—**ï¼šå®šä¹‰ç³»ç»Ÿå†…å­ç³»ç»Ÿæˆ–æ¨¡å—çš„å†…éƒ¨ç»“æž„å’Œç»„ç»‡ï¼Œä¾‹å¦‚å¦‚ä½•å°†å…¶åˆ’åˆ†ä¸ºç»„ä»¶æˆ–ç±»ï¼Œå®ƒä»¬å¦‚ä½•ç›¸äº’åä½œï¼Œä»¥åŠå®ƒä»¬å¦‚ä½•å‘å…¶ä»–å­ç³»ç»Ÿæˆ–æ¨¡å—æš´éœ²å…¶åŠŸèƒ½ã€‚
- **ç»„ä»¶æˆ–ç±»**ï¼šå®šä¹‰å­ç³»ç»Ÿæˆ–æ¨¡å—å†…ç»„ä»¶æˆ–ç±»çš„å†…éƒ¨ç»“æž„å’Œç»„ç»‡ï¼Œä¾‹å¦‚å¦‚ä½•å°†å…¶åˆ’åˆ†ä¸ºæ–¹æ³•æˆ–å‡½æ•°ï¼Œå®ƒä»¬å¦‚ä½•å®žçŽ°ç»„ä»¶æˆ–ç±»çš„é€»è¾‘å’Œè¡Œä¸ºï¼Œä»¥åŠå®ƒä»¬å¦‚ä½•è®¿é—®æ•°æ®æˆ–èµ„æºã€‚

7ã€æ€»ç»“

æž„å»ºé«˜æ€§èƒ½è½¯ä»¶ç³»ç»Ÿéœ€è¦ä»”ç»†çš„è§„åˆ’å’Œæ‰§è¡Œã€‚å…¶ä¸­æœ€é‡è¦çš„ä¸€ä¸ªæ–¹é¢æ˜¯ç³»ç»Ÿçš„æž¶æž„ã€‚è½¯ä»¶ç³»ç»Ÿçš„æž¶æž„å†³å®šäº†ç³»ç»Ÿçš„ç»“æž„ä»¥åŠå®ƒåœ¨ä¸åŒæ¡ä»¶ä¸‹çš„è¡¨çŽ°æ–¹å¼ã€‚

è¿˜æœ‰è®¸å¤šå…¶ä»–æž¶æž„é£Žæ ¼å’ŒæŠ€æœ¯å¯èƒ½é€‚ç”¨äºŽä¸åŒçš„ä¸Šä¸‹æ–‡å’Œåœºæ™¯ï¼Œæ²¡æœ‰ä¸€ç§é€‚ç”¨äºŽæ‰€æœ‰è½¯ä»¶ç³»ç»Ÿçš„é€šç”¨è§£å†³æ–¹æ¡ˆã€‚å…³é”®æ˜¯è¦ç†è§£ç³»ç»Ÿçš„éœ€æ±‚ã€çº¦æŸå’Œæƒè¡¡ï¼Œå¹¶é€‰æ‹©å’Œç»„åˆæœ€é€‚åˆæ‚¨éœ€æ±‚å’Œç›®æ ‡çš„æž¶æž„é£Žæ ¼å’ŒæŠ€æœ¯ã€‚

## tip [ðŸ”](#weekly-90)

## share [ðŸ”](#weekly-90)

### 1. æ°´åå¼ç»è¥æ³•

æ°´åå¼ç»è¥æºè‡ªæ—¥æœ¬ä¼ä¸šå®¶æ¾ä¸‹å¹¸ä¹‹åŠ©çš„ç®¡ç†ç†å¿µï¼Œæ ¸å¿ƒåœ¨äºŽé€šè¿‡å»ºç«‹ç¼“å†²æœºåˆ¶æ¥åº”å¯¹ä¸ç¡®å®šæ€§ï¼Œç¡®ä¿ä¼ä¸šåœ¨å¸‚åœºæ³¢åŠ¨ä¸­ä¿æŒç¨³å®šã€‚å…·ä½“æŽªæ–½åŒ…æ‹¬ï¼š

- èµ„é‡‘å‚¨å¤‡ï¼šé¢„ç•™éƒ¨åˆ†èµ„é‡‘åº”å¯¹çªå‘çŠ¶å†µã€‚
- åº“å­˜ç®¡ç†ï¼šä¿æŒé€‚é‡åº“å­˜ä»¥åº”å¯¹éœ€æ±‚æ³¢åŠ¨ã€‚
- äººæ‰å‚¨å¤‡ï¼šåŸ¹å…»å¤šæŠ€èƒ½å‘˜å·¥ä»¥çµæ´»åº”å¯¹å˜åŒ–ã€‚
- æŠ€æœ¯å‚¨å¤‡ï¼šæŒç»­ç ”å‘æ–°æŠ€æœ¯ä»¥ä¿æŒç«žäº‰åŠ›ã€‚

å¯¹ä¸ªäººçš„æ„ä¹‰

å°†è¿™ä¸€ç†å¿µåº”ç”¨äºŽä¸ªäººç”Ÿæ´»ï¼Œå¯ä»¥å¸®åŠ©æ›´å¥½åœ°åº”å¯¹ä¸ç¡®å®šæ€§ï¼Œæå‡æŠ—é£Žé™©èƒ½åŠ›ï¼š

- è´¢åŠ¡è§„åˆ’ï¼šå»ºç«‹åº”æ€¥åŸºé‡‘ï¼Œç¡®ä¿åœ¨å¤±ä¸šæˆ–çªå‘æ”¯å‡ºæ—¶ä»èƒ½ç»´æŒç”Ÿæ´»ã€‚
- æ—¶é—´ç®¡ç†ï¼šåˆç†å®‰æŽ’æ—¶é—´ï¼Œé¢„ç•™ç¼“å†²åº”å¯¹çªå‘äº‹ä»¶ã€‚
- æŠ€èƒ½æå‡ï¼šæŒç»­å­¦ä¹ æ–°æŠ€èƒ½ï¼Œå¢žå¼ºèŒä¸šç«žäº‰åŠ›ã€‚
- å¥åº·ç®¡ç†ï¼šä¿æŒå¥åº·ç”Ÿæ´»æ–¹å¼ï¼Œé¢„é˜²ç–¾ç—…ï¼Œå‡å°‘å¥åº·é£Žé™©ã€‚


å®žé™…åº”ç”¨

- è´¢åŠ¡ï¼šæ¯æœˆå‚¨è“„éƒ¨åˆ†æ”¶å…¥ï¼Œå»ºç«‹åº”æ€¥åŸºé‡‘ã€‚
- èŒä¸šï¼šå®šæœŸå­¦ä¹ æ–°æŠ€èƒ½ï¼Œä¿æŒèŒä¸šç«žäº‰åŠ›ã€‚
- ç”Ÿæ´»ï¼šåˆ¶å®šçµæ´»è®¡åˆ’ï¼Œé¢„ç•™æ—¶é—´åº”å¯¹çªå‘æƒ…å†µã€‚

[readme](../README.md) | [previous](202411W3.md) | [next](202412W1.md)
