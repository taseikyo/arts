> @Author  : Lewis Tian (taseikyo@gmail.com)
>
> @Link    : github.com/taseikyo
>
> @Range   : 2021-02-28 - 2021-03-06

# Weekly #18

[readme](../README.md) | [previous](202102W4.md) | [next](202103W2.md)

## Table of Contents

- [algorithm](#algorithm-)
- [review](#review-)
- [tip](#tip-)
	- 解释 Shell 命令的网站
	- Linux 批量删除空文件及空文件夹
	- matplotlib 画多子图
- [share](#share-)

## algorithm [⬆](#weekly-18)

## review [⬆](#weekly-18)

## tip [⬆](#weekly-18)

### 1. [解释 Shell 命令的网站](https://explainshell.com/)

这个网站很有意思，在输入栏输入一条 Shell 命令，点击 EXPLAIN 按钮，然后就会转到解释你输入命令的页面，一般可能会分成命令和参数两个部分。

![](../images/2021/03/20210226212033.png)

### 2. [Linux 批量删除空文件及空文件夹](https://blog.csdn.net/hanglinux/article/details/49925975)

1、批量删除空文件（大小等于 0 的文件）

```Bash
find . -name "*" -type f -size 0c | xargs -n 1 rm -f
```

2、删除指定大小的文件，只要修改对应的 `-size` 参数就行

```Bash
find . -name "*" -type f -size 1024c | xargs -n 1 rm -f
```

就是删除 1 大小的文件（但注意不要用 `-size 1k`，这个得到的是占用空间 1k，不是文件大小 1k 的）。

3、查询出所有的空文件夹

```Bash
find -type d -empty
```

4、删除文件

列出搜索到的文件

```Bash
find . -name "shuaige.txt" -exec ls {} \;

tian@node ~> find Desktop -name "fread" -exec ls {} \;
Desktop/200914-test/fread
Desktop/read_test/fread
```

批量删除搜索到的文件

```Bash
find . -name "shuaige.txt" -exec rm -f {} \;

tian@node ~> find Desktop -name "fread" -exec rm -rf {} \;
tian@node ~> find Desktop -name "fread" -exec ls {} \;    
tian@node ~> 
```

删除前有提示

```Bash
find . -name "shuaige.txt" -ok rm -rf {} \;

tian@node ~> find Desktop -name "fread" -ok rm -rf {} \;
< rm ... Desktop/200914-test/fread > ? n
< rm ... Desktop/read_test/fread > ? n
tian@node ~> find Desktop -name "fread" -exec ls {} \;
Desktop/200914-test/fread
Desktop/read_test/fread
```

删除当前目录下面所有 test 文件夹下面的文件

```Bash
find . -name "test" -type d -exec rm -rf {} \;
```

注意：

1. {} 前后有空格
1. exec 是一个后续的命令，{} 内的内容代表前面查找出来的文件

### 3. matplotlib 画多子图

用 Python 画图一直用的是这个库，但都是用到啥就直接搜，比如多子图。然后在搜的过程中发现有两种方法画子图，但是要对子图进行数据标注时，可能后一种方法更方便（血泪教训，也是自己菜）。

第一种：

```Python
fig, axs = plt.subplots(2, 3)

xlabel = ("Tom", "Marry")

for x in range(2):
    for y in range(3):
        axs[x][y].bar([0, 1], (tom[3*x+y], marry[3*x+y]),
                      color=('#91C9AB', '#DC5356'))
        axs[x][y].set_title(f"({chr(ord('a')+3*x+y)}) Tom:Marry={subtitle[3*x+y]}", y=-.25)
        axs[x][y].xaxis.set_ticks([0, 1])
        axs[x][y].set_xticklabels(xlabel)

plt.subplots_adjust(hspace=.15)
plt.tight_layout()
plt.show()
```

![](../images/2021/03/subfig-1.png)

这个时候不能为子图做标注，也可能是我没搜到，但是在搜的过程中发现了下面的第二种方法：https://www.cnblogs.com/zxingwork/p/12235870.html

第二种：

```Python
def add_labels(rects, label):
	"""
	添加标注，label 就是标注的内容
	"""
    for i, rect in enumerate(rects):
        x = rect.get_x() + rect.get_width() / 2
        y = rect.get_height()
        plt.text(
            x,
            y-0.15,
            f"{round((label[i]-1)*100, 2)}",
            ha="center",
            va="bottom",
        )
        rect.set_edgecolor("white")

plt.subplot(211)
fig = plt.bar(
    range(len(tom_money)),
    tom_money,
    tick_label=tom_label,
    alpha=0.6,
    width=0.8,
    color="#dc3023",
    hatch="+",
)

add_labels(fig, tom_money)
plt.xlabel("(a) pocket money of Tom", y=-.25)

plt.subplot(212)
fig = plt.bar(
    range(len(marry_money)),
    marry_money,
    tick_label=tom_label,
    alpha=0.5,
    width=0.8,
    color="#ff4c00",
    hatch="o",
)

add_labels(fig, marry_money)
plt.xlabel("(b) pocket money of Marry", y=-.25)
plt.tight_layout()
plt.show()
```

![](../images/2021/03/subfig-2.png)

这一种就方便许多，可以很简答地为子图添加标记、柱状图的名称（tick_label）、横纵坐标名称、子图标题、图标（legend）等等。

后面我可能更多使用第二种方法吧，虽然看上去代码更多。

## share [⬆](#weekly-18)

[readme](../README.md) | [previous](202102W4.md) | [next](202103W2.md)
