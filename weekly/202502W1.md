> @Author  : Lewis Tian (taseikyo@gmail.com)
>
> @Link    : github.com/taseikyo
>
> @Range   : 2025-02-02 - 2025-02-08

# Weekly #100

[readme](../README.md) | [previous](202501W5.md) | [next](202502W2.md)

![](../images/2025/02/dynamic-wang-efC8-MnHfXU-unsplash.jpg "Weekly #100")

\**Photo by [Dynamic Wang](https://unsplash.com/@dynamicwang) on [Unsplash](https://unsplash.com/photos/a-woman-taking-a-picture-of-herself-with-a-camera-efC8-MnHfXU)*

## Table of Contents

- [algorithm](#algorithm-)
- [review](#review-)
- [tip](#tip-)
	- python matplotlib ä¸­æ–‡æ˜¾ç¤ºå‚æ•°è®¾ç½®
	- ä¸€æ–‡æŒæ¡æå‡ Python ä»£ç è´¨é‡çš„æœ€ä½³ä¼´ä¾£å·¥å…·ï¼šblackã€isortã€flake8 å’Œ mypy
- [share](#share-)

## algorithm [ğŸ”](#weekly-100)

## review [ğŸ”](#weekly-100)

## tip [ğŸ”](#weekly-100)

### 1. [python matplotlib ä¸­æ–‡æ˜¾ç¤ºå‚æ•°è®¾ç½®](https://segmentfault.com/a/1190000005144275)

æœ€è¿‘åœ¨å­¦ä¹  python è‘—åçš„ç»˜å›¾åŒ… matplotlib æ—¶å‘ç°ï¼Œæœ‰æ—¶å€™å›¾ä¾‹ç­‰è®¾ç½®æ— æ³•æ­£å¸¸æ˜¾ç¤ºä¸­æ–‡ï¼Œäºæ˜¯å°±æƒ³æŠŠè¿™ä¸ªé—®é¢˜è§£å†³äº†ã€‚

PSï¼šæœ¬æ–‡ä»…é’ˆå¯¹ Windowsï¼Œå…¶ä»–å¹³å°ä»…ä¾›å‚è€ƒã€‚


#### åŸå› 

å¤§è‡´å°±æ˜¯ matplotlib åº“ä¸­æ²¡æœ‰ä¸­æ–‡å­—ä½“ã€‚
æˆ‘å®‰è£…çš„ anacondaï¼Œè¿™æ˜¯å¯¹åº”çš„ matplotlib çš„å­—ä½“æ‰€åœ¨æ–‡ä»¶å¤¹ï¼ˆæ€ä¹ˆæ‰¾åˆ° matplotlib é…ç½®æ–‡ä»¶å¤¹æ‰€åœ¨ï¼Œä¸‹é¢è§£å†³æ–¹æ¡ˆä¼šå™è¿°ï¼Œeasy man~ï¼‰ã€‚

```
C:\Anaconda64\Lib\site-packages\matplotlib\mpl-data\fonts\ttf
```

#### è§£å†³æ–¹æ¡ˆ

ç°åœ¨æ•´ç†ä¸€ä¸‹æˆ‘è®¤ä¸ºæ¯”è¾ƒå¥½çš„è§£å†³æ–¹æ¡ˆï¼š

- æ¯æ¬¡ç¼–å†™ä»£ç æ—¶è¿›è¡Œå‚æ•°è®¾ç½®

```python
#coding:utf-8
import matplotlib.pyplot as plt
plt.rcParams['font.sans-serif']=['SimHei'] #ç”¨æ¥æ­£å¸¸æ˜¾ç¤ºä¸­æ–‡æ ‡ç­¾
plt.rcParams['axes.unicode_minus']=False #ç”¨æ¥æ­£å¸¸æ˜¾ç¤ºè´Ÿå·
#æœ‰ä¸­æ–‡å‡ºç°çš„æƒ…å†µï¼Œéœ€è¦u'å†…å®¹'
```

- ä¸€åŠ³æ°¸é€¸ï¼ˆæ¨èï¼‰

```python
import matplotlib
matplotlib.matplotlib_fname() #å°†ä¼šè·å¾—matplotlibåŒ…æ‰€åœ¨æ–‡ä»¶å¤¹
```

ç„¶åè¿›å…¥`C:\Anaconda64\Lib\site-packages\matplotlib\mpl-data`è¯¥æ–‡ä»¶å¤¹ä¸‹å°±èƒ½çœ‹åˆ° **matplotlibrc** é…ç½®æ–‡ä»¶ã€‚

1ï¼‰æ‰“å¼€è¯¥é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°ä¸‹é¢è¿™è¡Œï¼š

```
#font.serif          : Bitstream Vera Serif, New Century Schoolbook, Century Schoolbook L, Utopia, ITC Bookman, Bookman, Nimbus Roman No9 L, Times New Roman, Times, Palatino, Charter, serif
```

ç„¶åï¼Œå°†å‰é¢çš„æ³¨é‡Šå»æ‰ï¼  
2ï¼‰æ‰¾ä¸­æ–‡å­—ä½“æ”¾åˆ° matplotlib å­—ä½“åº“ä¸­ã€‚  
åœ¨ Windows æ–‡ä»¶å¤¹ä¸‹ï¼š`C:\Windows\Fonts\Microsoft YaHei UI`å¤åˆ¶è¯¥å­—ä½“ï¼Œç„¶åç²˜è´´åˆ°`C:\Anaconda64\Lib\site-packages\matplotlib\mpl-data\fonts\ttf`æ–‡ä»¶å¤¹ï¼Œå¹¶ç»™å®ƒé‡å‘½åä¸º`Vera.ttf`ã€‚

æ³¨æ˜ï¼šè¿™ä¸€æ­¥çš„ä½œç”¨å…¶å®å°±æ˜¯å°† matplotlib ä¸­ä¸€ä¸ªé»˜è®¤çš„å­—ä½“æ›¿æ¢ä¸ºæˆ‘ä»¬å¤åˆ¶è¿‡æ¥çš„ä¸­æ–‡å­—ä½“ï¼Œå°†è¿™ä¸ªä¸­æ–‡å­—ä½“å‘½åæ”¹ä¸º matplotlib ä¸­æœ‰çš„å­—ä½“åã€‚

å…¶å®ï¼Œè¿˜æœ‰å…¶ä»–æ–¹æ¡ˆï¼Œä½†æ˜¯è²Œä¼¼åœ¨æˆ‘è¿™å„¿æ²¡æˆåŠŸã€‚

#### è¡¥å……

åæ ‡è½´çš„è´Ÿå·æ­£å¸¸æ˜¾ç¤ºï¼š

```
#å»æ‰äº†æ³¨é‡Šç¬¦å·ï¼ŒåŒæ—¶ï¼Œæ”¹ä¸ºFalse
axes.unicode_minus  : False
```

#### ä¸¾ä¾‹

```python
#coding:utf-8
import matplotlib.pyplot as plt
plt.plot((1,2,3),(4,3,-1))
plt.xlabel(u'æ¨ªåæ ‡')
plt.ylabel(u'çºµåæ ‡')
plt.show()
```

![](../images/2025/02/284088541-58e8696eb07ec_fix732.jpg)

#### æœ€å

- [Michael ç¿”](https://link.segmentfault.com/?enc=0aJKqqAFi3nya1eHYvujLQ%3D%3D.1VAoVv%2F404hnKtC1E8NHiBpgv1P2BPucSwOWpn9JezI%3D)
- [matplotlib ä¸­æ–‡ä¹±ç è§£å†³](https://link.segmentfault.com/?enc=GSdyPGLM50Av0QZh54XbUg%3D%3D.6SDt9xO8liE47gqNOgGYGJ7fctD1QhWVyqawkmhF%2BaHi%2BUWe0YwKrqacktpWrzLEEjsUtegKy5giKyvK7%2BzVJA%3D%3D)
- [å®˜ç½‘ - Customizing matplotlib](https://link.segmentfault.com/?enc=TFQ%2FNVy3W%2BWKb1Eo5fvJZA%3D%3D.MrHlM8jBXGc556mTQ%2FQHs95k8MgS5s31f9gepdNk9VJ814uPtXpO7AGGqZIhEEv2)
- [matplotlib ä¸­ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œè®©å®ƒé»˜è®¤ä½¿ç”¨çš„å­—ä½“å°±æ˜¯ä¸­æ–‡å­—ä½“](https://link.segmentfault.com/?enc=J5v1qIAve9soRAfOe7Kdsw%3D%3D.VcBoCjRkMnpa57u%2FVCt4hr0hHcdWqCCVBoEpyuvUBqkYmUUuMF8wbp58ouWdvAtG)
- [è§£å†³ matplotlib ä¸­æ–‡ä¹±ç é—®é¢˜ï¼ˆWindowsï¼‰](https://link.segmentfault.com/?enc=pYEeXcmKANXZ2qhwNVrqZw%3D%3D.nnHSqw8FqYkMF9aJIPoPahU4HXrAFlbBQgpWAd627AtUnZpfN2PZR8nsDEVkDJJa)
- [python ç”»å›¾åŒ… seaborn å’Œ matplotlib ä¸­æ–‡å­—ä½“æ˜¾ç¤º](https://link.segmentfault.com/?enc=LFqX8ZysecJxs0RbHnOc7Q%3D%3D.vZQpFZyt1Bi2aEo7bmt0prMuY%2Bij5ZNQVEdJKQnW9kHHiH%2BkRFXkdgcLyfDdHsyxgrSUO%2FzLmykWyQ7aqbHv4aIo9odkuGVm2YfL3vhE3r4%3D)
- [å¦‚ä½•åœ¨ matplotlib é‡Œæ˜¾ç¤ºä¸­æ–‡](https://link.segmentfault.com/?enc=IfYcKP89ajjnTNZQy%2Bl71w%3D%3D.caIwyrRfA8VZcXGSzlp5%2BfHxbXJmZZ7JhnOSGMyZx%2F8UDse635c1T%2Fd8dlG2jt3ncgAXHq4qJp0mEpvYIJeBTG5sN8LKOwLUw8eeOhwDU44NeZlwuhtrWKj9jOHtRF4u)

### 2. [ä¸€æ–‡æŒæ¡æå‡ Python ä»£ç è´¨é‡çš„æœ€ä½³ä¼´ä¾£å·¥å…·ï¼šblackã€isortã€flake8 å’Œ mypy](https://blog.csdn.net/fyfugoyfa/article/details/139896437)

åœ¨ Python é¡¹ç›®å¼€å‘ä¸­ï¼Œä¸ºäº†ä¿æŒä»£ç è´¨é‡å’Œæé«˜å¼€å‘æ•ˆç‡ï¼Œæˆ‘ä»¬å¸¸éœ€å€ŸåŠ©ä¸€äº›å·¥å…·ã€‚ä»Šå¤©ï¼Œæˆ‘å°†ä¸ºå¤§å®¶ä»‹ç»å››ä¸ª Python ä»£ç å·¥ç¨‹çš„å¾—åŠ›åŠ©æ‰‹ï¼šblackã€isortã€flake8 å’Œ mypyã€‚

**æœ¬æ–‡çš„æ€ç»´å¯¼å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š**

![](../images/2025/02/be8c6644f41eaeb4380e6533ffb35b3e.png)

ä½¿ç”¨è¿™å››ä¸ªå·¥å…·çš„æœ‰æœºç»“åˆï¼Œèƒ½å¤Ÿç¼–å†™å‡º**æ›´ä¸ºè§„èŒƒã€æ•´æ´çš„ Python ä»£ç **ã€‚ç„¶è€Œï¼Œä»£ç çš„å…·ä½“è´¨é‡ä»ç„¶å–å†³äºå¼€å‘è€…è‡ªèº«ï¼Œå·¥å…·åªæ˜¯è¾…åŠ©æ‰‹æ®µã€‚è¯·ç‰¢è®°è¿™ä¸€ç‚¹ã€‚

#### ä¸€ã€black

1ã€ä»€ä¹ˆæ˜¯ Blackï¼Ÿ

Black æ˜¯ä¸€ä¸ªå¼€æºçš„ Python ä»£ç æ ¼å¼åŒ–å·¥å…·ï¼Œæ—¨åœ¨æä¾›ä¸€è‡´çš„ä»£ç é£æ ¼å¹¶æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚å®ƒä¼šè‡ªåŠ¨å°†ä»£ç æ ¼å¼åŒ–ä¸ºç¬¦åˆ PEP 8 è§„èŒƒçš„æ ‡å‡†é£æ ¼ï¼Œå› æ­¤è¢«ç§°ä¸º â€œ**é›¶å¦¥åä»£ç æ ¼å¼åŒ–å·¥å…·**â€ã€‚

**Black 24.4.2 å®˜æ–¹æ–‡æ¡£**ï¼š[https://black.readthedocs.io/en/stable/getting_started.html](https://black.readthedocs.io/en/stable/getting_started.html)

2ã€ä¸ºä»€ä¹ˆä½¿ç”¨ Blackï¼Ÿ

ä½¿ç”¨ Black çš„ä¸»è¦åŸå› å¦‚ä¸‹ï¼š

- **ä¸€è‡´æ€§**ï¼šé€šè¿‡è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç ï¼ŒBlack ç¡®ä¿äº†æ•´ä¸ªé¡¹ç›®ä¸­çš„ä»£ç é£æ ¼ä¸€è‡´ï¼Œå‡å°‘äº†ä»£ç å®¡æŸ¥è¿‡ç¨‹ä¸­çš„äº‰è®®å’Œè€—æ—¶ã€‚
- **ç®€åŒ–ä»£ç å®¡æŸ¥**ï¼šç”±äº Black è‡ªåŠ¨å¤„ç†ä»£ç æ ¼å¼é—®é¢˜ï¼Œå¼€å‘è€…å¯ä»¥**å°†æ›´å¤šç²¾åŠ›æ”¾åœ¨ä»£ç é€»è¾‘å’ŒåŠŸèƒ½ä¸Šï¼Œè€Œéæ ¼å¼ç»†èŠ‚**ã€‚
- **æé«˜å¯è¯»æ€§**ï¼šBlack å¼ºåˆ¶æ‰§è¡Œæ ‡å‡†åŒ–çš„æ ¼å¼ï¼Œä½¿ä»£ç æ›´å®¹æ˜“é˜…è¯»å’Œç†è§£ï¼Œå°¤å…¶æ˜¯åœ¨å›¢é˜Ÿåˆä½œä¸­ã€‚
- **èŠ‚çœæ—¶é—´**ï¼šè‡ªåŠ¨æ ¼å¼åŒ–ä»£ç å¯ä»¥æ˜¾è‘—å‡å°‘å¼€å‘è€…æ‰‹åŠ¨è°ƒæ•´ä»£ç æ ¼å¼çš„æ—¶é—´ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚

3ã€å…·ä½“æ€ä¹ˆåšï¼Ÿ

3.1ã€å®‰è£… Black

åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ pip å®‰è£… Blackï¼š

```bash
pip install black
```

å¦‚æœéœ€è¦åœ¨ Jupyter Notebook ä¸­ä½¿ç”¨ï¼Œåˆ™è¿è¡Œï¼š

```bash
pip install black[jupyter]
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒBlack éœ€è¦ Python 3.8 ä»¥ä¸Šçš„ç‰ˆæœ¬ã€‚

3.2ã€ä½¿ç”¨ Black

Black ä½¿ç”¨éå¸¸ç®€å•ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›åŸºæœ¬ç”¨æ³•ï¼š

- **æ ¼å¼åŒ–æ–‡ä»¶**ï¼šåœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤å³å¯æ ¼å¼åŒ–æ–‡ä»¶ï¼š

```bash
black your_file.py
```
    
- **æ ¼å¼åŒ–ç›®å½•**ï¼šæ ¼å¼åŒ–ç›®å½•ä¸­çš„æ‰€æœ‰ Python æ–‡ä»¶ï¼š

```bash
black your_directory/
```
    
- **è·³è¿‡å­—ç¬¦ä¸²æ ¼å¼åŒ–**ï¼šå¦‚æœé¡¹ç›®è¦æ±‚ä¿ç•™å•å¼•å·ï¼Œå¯ä»¥ä½¿ç”¨ `-S` é€‰é¡¹ï¼š
    
```bash
black -S your_file.py
```

3.3ã€é«˜çº§ç”¨æ³•å’Œé…ç½®

Black è¿˜æ”¯æŒä¸€äº›é«˜çº§é…ç½®é€‰é¡¹ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå‚æ•°å®ç°ï¼š

- **æŒ‡å®šè¡Œå®½**ï¼šä½¿ç”¨ `--line-length` é€‰é¡¹æ¥è®¾ç½®è‡ªå®šä¹‰ä»£ç æœ€å¤§è¡Œå®½ï¼š
    
```bash
black --line-length 100 your_file.py
```

- **æ’é™¤ç‰¹å®šæ–‡ä»¶æˆ–ç›®å½•**ï¼šä½¿ç”¨ `--exclude` é€‰é¡¹æ’é™¤ç‰¹å®šçš„æ–‡ä»¶æˆ–ç›®å½•ï¼š
    
```bash
black --exclude "tests/" your_directory/
```

- **ä»…æ£€æŸ¥ä¸ä¿®æ”¹**ï¼šä½¿ç”¨ `--check` é€‰é¡¹åªæ£€æŸ¥æ ¼å¼è€Œä¸ä¿®æ”¹æ–‡ä»¶ï¼š
    
```bash
black --check your_file.py
```

3.4ã€é›†æˆåˆ° IDE ä¸­

Black å¯ä»¥é›†æˆåˆ°å¤šç§ç¼–è¾‘å™¨å’Œ IDE ä¸­ï¼Œå¦‚ VS Codeã€PyCharmã€Sublime Text ç­‰ã€‚ä»¥ VS Code ä¸ºä¾‹ï¼Œå¯ä»¥åœ¨æ‰©å±•å¸‚åœºä¸­æœç´¢å¹¶å®‰è£… `Black Formatter` æ‰©å±•ã€‚

4ã€æ€»ç»“

Black æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ Python ä»£ç æ ¼å¼åŒ–å·¥å…·ï¼Œé€šè¿‡å…¶è‡ªåŠ¨åŒ–å’Œä¸€è‡´æ€§çš„ç‰¹ç‚¹ï¼Œå¸®åŠ©å¼€å‘è€…å‡å°‘ä»£ç æ ¼å¼é—®é¢˜ï¼Œæé«˜ä»£ç å®¡æŸ¥æ•ˆç‡å’Œé¡¹ç›®å¯ç»´æŠ¤æ€§ã€‚æ— è®ºæ˜¯ä¸ªäººé¡¹ç›®è¿˜æ˜¯å›¢é˜Ÿåˆä½œï¼ŒBlack éƒ½èƒ½æ˜¾è‘—æå‡å¼€å‘ä½“éªŒå’Œä»£ç è´¨é‡ã€‚

#### äºŒã€isort

1ã€æ˜¯ä»€ä¹ˆï¼Ÿ

isort æ˜¯ä¸€ä¸ª Python å®ç”¨å·¥å…·åº“ï¼Œç”¨äºè‡ªåŠ¨æ’åºå’Œæ ¼å¼åŒ– Python æ–‡ä»¶ä¸­çš„å¯¼å…¥è¯­å¥ã€‚å®ƒèƒ½å¤Ÿå°†å¯¼å…¥è¯­å¥æŒ‰ç…§å­—æ¯é¡ºåºæ’åˆ—ï¼Œå¹¶è‡ªåŠ¨åˆ†ç»„æˆä¸åŒçš„éƒ¨åˆ†ï¼Œä¾‹å¦‚æ ‡å‡†åº“ã€ç¬¬ä¸‰æ–¹åº“å’Œé¡¹ç›®å†…éƒ¨æ¨¡å—ï¼ˆè‡ªå·±å°è£…ã€å®ç°çš„æ¨¡å—ï¼‰ã€‚

isort å®˜æ–¹æ–‡æ¡£ï¼š[https://pycqa.github.io/isort/](https://pycqa.github.io/isort/)

2ã€ä¸ºä»€ä¹ˆï¼Ÿ

å¯¼å…¥è¯­å¥è§„èŒƒåŒ–æœ‰åŠ©äºæé«˜ä»£ç çš„å¯è¯»æ€§å’Œç»´æŠ¤æ€§ï¼Œå°¤å…¶åœ¨å›¢é˜Ÿåä½œå’Œå¤§å‹é¡¹ç›®ä¸­æ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚æ‰‹åŠ¨ç®¡ç†å¯¼å…¥è¯­å¥çš„é¡ºåºä¸ä»…è€—æ—¶ï¼Œè€Œä¸”å®¹æ˜“å‡ºé”™ã€‚isort è‡ªåŠ¨åŒ–è¿™ä¸€è¿‡ç¨‹ï¼Œç¡®ä¿æ‰€æœ‰å¯¼å…¥è¯­å¥éƒ½ç¬¦åˆç‰¹å®šçš„æ ¼å¼å’Œæ’åºè§„åˆ™ï¼Œä»è€Œå‡å°‘ä»£ç å®¡æŸ¥è¿‡ç¨‹ä¸­å¯¹å¯¼å…¥é¡ºåºçš„è®¨è®ºã€‚

3ã€å…·ä½“æ€ä¹ˆåšï¼Ÿ

3.1ã€å®‰è£… isort

å¯ä»¥é€šè¿‡ `pip` æ¥å®‰è£… isortï¼š

```bash
pip install isort
```

3.2ã€åŸºæœ¬ä½¿ç”¨

- å¯¹å•ä¸ªæ–‡ä»¶æ’åºï¼š
    
```bash
isort your_script.py
```

- å¯¹æ•´ä¸ªé¡¹ç›®ä¸­çš„æ‰€æœ‰ Python æ–‡ä»¶æ’åºï¼š
    
```bash
isort .
```
    

3.3ã€è¿›è¡Œé…ç½®

å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶ï¼ˆå¦‚ `pyproject.toml`ã€`.isort.cfg`ã€`setup.cfg` ç­‰ï¼‰è‡ªå®šä¹‰ isort çš„è¡Œä¸ºã€‚ä¾‹å¦‚ï¼Œåœ¨ `pyproject.toml` ä¸­ï¼š

```
[tool.isort]
profile = "black"
line_length = 88
```

ä¸Šè¿°é…ç½®æŒ‡ç¤º isort ä½¿ç”¨ä¸ `black` ä»£ç æ ¼å¼åŒ–å™¨å…¼å®¹çš„é…ç½®ï¼Œå¹¶å°†æœ€å¤§ä»£ç è¡Œé•¿åº¦è®¾ç½®ä¸º 88ã€‚

3.4ã€ é›†æˆåˆ°ç¼–è¾‘å™¨æˆ–æŒç»­é›†æˆæµç¨‹

- **ç¼–è¾‘å™¨æ’ä»¶**ï¼šisort æä¾›äº†å¤šç§ç¼–è¾‘å™¨æ’ä»¶æ”¯æŒï¼ŒåŒ…æ‹¬ VSCodeã€PyCharm ç­‰ï¼Œæ–¹ä¾¿åœ¨ä¿å­˜æ–‡ä»¶æ—¶è‡ªåŠ¨æ’åºå¯¼å…¥è¯­å¥ã€‚
- **é¢„æäº¤é’©å­ï¼ˆpre-commit hookï¼‰**ï¼šisort å®˜æ–¹æ”¯æŒ pre-commitï¼Œç¡®ä¿åœ¨ä»£ç æäº¤å‰è‡ªåŠ¨æ£€æŸ¥å’Œä¿®å¤å¯¼å…¥è¯­å¥çš„é¡ºåºã€‚

3.5ã€æ£€æŸ¥å¯¼å…¥é¡ºåºæ˜¯å¦æ­£ç¡®

ä½¿ç”¨ `-c` æˆ– `--check-only` é€‰é¡¹å¯ä»¥ä»…æ£€æŸ¥å¯¼å…¥é¡ºåºæ˜¯å¦æ­£ç¡®ï¼Œè€Œä¸å®é™…ä¿®æ”¹æ–‡ä»¶ï¼š

```bash
isort -c your_script.py
```

å¦‚æœå¯¼å…¥é¡ºåºä¸æ­£ç¡®ï¼Œä¼šè¾“å‡ºç›¸åº”çš„é”™è¯¯ä¿¡æ¯ã€‚é€šè¿‡ä½¿ç”¨ isortï¼Œå¯ä»¥æ˜¾è‘—æé«˜ä»£ç çš„ä¸€è‡´æ€§å’Œå¯è¯»æ€§ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§å‹é¡¹ç›®å’Œå›¢é˜Ÿåä½œä¸­ï¼Œè‡ªåŠ¨åŒ–å·¥å…·çš„ä½¿ç”¨èƒ½å¤Ÿå¤§å¹…å‡å°‘æ‰‹åŠ¨æ“ä½œçš„é”™è¯¯å’Œæ—¶é—´æ¶ˆè€—ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼Œisort æ˜¯ä¸€ä¸ªå¼ºå¤§ä¸”é«˜æ•ˆçš„å·¥å…·åº“ï¼Œå¯ä»¥å¸®åŠ© Python å¼€å‘äººå‘˜è‡ªåŠ¨åŒ–å’Œæ ‡å‡†åŒ–å¯¼å…¥è¯­å¥çš„ç®¡ç†ï¼Œä¸ºä»£ç å®¡æŸ¥å’Œç»´æŠ¤æä¾›äº†æå¤§çš„ä¾¿åˆ©ã€‚

#### ä¸‰ã€flake8

1ã€flake8 æ˜¯ä»€ä¹ˆï¼Ÿ

**flake8** æ˜¯ä¸€ä¸ªç”¨äº Python ç¼–ç¨‹è¯­è¨€çš„é™æ€ä»£ç åˆ†æå·¥å…·ï¼Œå®ƒç»“åˆäº†å¤šä¸ªå·¥å…·æ¥æ£€æŸ¥ä»£ç è´¨é‡å’Œé£æ ¼ä¸€è‡´æ€§ã€‚å…·ä½“æ¥è¯´ï¼Œflake8 é›†æˆäº†ä»¥ä¸‹ä¸‰ç§å·¥å…·ï¼š

- **PyFlakes**ï¼šç”¨äºæ£€æŸ¥ä»£ç ä¸­çš„é”™è¯¯ã€‚
- **pycodestyle**ï¼šç”¨äºæ£€æŸ¥ä»£ç æ˜¯å¦ç¬¦åˆ PEP 8 ç¼–ç è§„èŒƒã€‚
- **Ned Batchelder çš„ McCabe script**ï¼šç”¨äºæ£€æŸ¥ä»£ç çš„å¤æ‚åº¦ã€‚

**flake8 å®˜æ–¹æ–‡æ¡£**ï¼š[https://flake8.pycqa.org/en/latest/](https://flake8.pycqa.org/en/latest/)

2ã€ä¸ºä»€ä¹ˆä½¿ç”¨ flake8ï¼Ÿ

ä½¿ç”¨ flake8 æœ‰ä»¥ä¸‹å‡ ä¸ªä¸»è¦åŸå› ï¼š

1.  **ä»£ç è´¨é‡ä¿éšœ**ï¼šè‡ªåŠ¨æ£€æµ‹ä»£ç ä¸­çš„é”™è¯¯ï¼Œå¸®åŠ©å¼€å‘è€…åœ¨æ—©æœŸå‘ç°æ½œåœ¨é—®é¢˜ã€‚
2.  **é£æ ¼ä¸€è‡´æ€§**ï¼šç¡®ä¿ä»£ç ç¬¦åˆ PEP 8 æ ‡å‡†ï¼Œæå‡ä»£ç çš„å¯è¯»æ€§å’Œä¸€è‡´æ€§ã€‚
3.  **å¤æ‚åº¦æ§åˆ¶**ï¼šåˆ†æä»£ç çš„å¤æ‚åº¦ï¼Œæé†’å¼€å‘è€…é¿å…è¿‡äºå¤æ‚çš„ä»£ç ç»“æ„ã€‚
4.  **å¯æ‰©å±•æ€§å¼º**ï¼šæ”¯æŒç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è‡ªå®šä¹‰æ£€æŸ¥è§„åˆ™ã€‚

3ã€å…·ä½“æ€ä¹ˆåšï¼Ÿ

3.1ã€å®‰è£… flake8

1.  æ‰“å¼€ç»ˆç«¯ï¼ˆæˆ–å‘½ä»¤è¡Œç•Œé¢ï¼‰ã€‚
    
2.  è¿è¡Œä»¥ä¸‹å‘½ä»¤é€šè¿‡ `pip` å®‰è£… flake8ï¼š
    
```bash
python -m pip install flake8

```

è¿™æ¡å‘½ä»¤ä¼šè‡ªåŠ¨å®‰è£… flake8 åŠå…¶æ‰€æœ‰å¿…è¦çš„ä¾èµ–é¡¹ã€‚

3.2ã€ä½¿ç”¨ flake8

- **åŸºæœ¬ç”¨æ³•**ï¼š

- æ£€æŸ¥ç‰¹å®šæ–‡ä»¶ï¼š

```bash
flake8 path/to/code/to/check.py
```

- æ£€æŸ¥æ•´ä¸ªç›®å½•ï¼š

```bash
flake8 path/to/code/
```

è¿™å°†ä¼šé€’å½’æ£€æŸ¥ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ã€‚

- **é€‰æ‹©ç‰¹å®šçš„é”™è¯¯æˆ–è­¦å‘Š**ï¼š

- ä»…æŸ¥çœ‹ç‰¹å®šè­¦å‘Šæˆ–é”™è¯¯ï¼š

```bash
flake8 --select E123,W503 path/to/code/
```

- å¿½ç•¥ç‰¹å®šçš„è­¦å‘Šæˆ–é”™è¯¯ï¼š

```bash
flake8 --ignore E24,W504 path/to/code/
```

å¯ä»¥æŒ‡å®šå¤šä¸ªé”™è¯¯åŠè­¦å‘Šï¼Œç”¨é€—å·åˆ†éš”ã€‚
- **é…ç½® flake8**ï¼š

- å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶æ¥è®¾ç½®å…¨å±€å’Œé¡¹ç›®çº§çš„ flake8 é€‰é¡¹ï¼Œä¾‹å¦‚åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª `.flake8` æ–‡ä»¶ï¼Œå¹¶é…ç½®å…¶ä¸­çš„é€‰é¡¹ï¼š

```
[flake8]
max-line-length = 88
exclude = venv, tests
```

è¿™æ ·å¯ä»¥é¿å…åœ¨æ¯æ¬¡è¿è¡Œ flake8 æ—¶éƒ½é‡å¤è¾“å…¥ç›¸åŒçš„å‘½ä»¤è¡Œå‚æ•°ã€‚

é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œæ‚¨å¯ä»¥æœ‰æ•ˆåœ°ä½¿ç”¨ flake8 æ¥å¸®åŠ©æå‡ä»£ç è´¨é‡ã€ä¿æŒé£æ ¼ä¸€è‡´æ€§å¹¶æ§åˆ¶å¤æ‚åº¦ã€‚å»ºè®®å‚è€ƒ[å®˜æ–¹æ–‡æ¡£](https://flake8.pycqa.org/en/latest/)è·å–æ›´å¤šè¯¦ç»†çš„ç”¨æ³•å’Œé…ç½®ç¤ºä¾‹ã€‚

#### å››ã€mypy

1ã€æ˜¯ä»€ä¹ˆï¼Ÿ

mypy æ˜¯ Python çš„ä¸€ä¸ªé™æ€ç±»å‹æ£€æŸ¥å·¥å…·ã€‚å®ƒé€šè¿‡**åœ¨ä»£ç ä¸­æ·»åŠ ç±»å‹æ³¨è§£**ï¼Œå¸®åŠ©å¼€å‘è€…åœ¨ç¼–å†™ä»£ç æ—¶å‘ç°æ½œåœ¨çš„ç±»å‹é”™è¯¯ï¼Œä»è€Œæé«˜ä»£ç è´¨é‡å’Œå¯è¯»æ€§ã€‚mypy å…è®¸åœ¨ Python è¿™ç§åŠ¨æ€ç±»å‹è¯­è¨€ä¸­ä½¿ç”¨é™æ€ç±»å‹æ£€æŸ¥çš„ä¼˜ç‚¹ã€‚

mypy å®˜æ–¹æ–‡æ¡£ï¼š[https://mypy.readthedocs.io/en/stable/](https://mypy.readthedocs.io/en/stable/)

2ã€ä¸ºä»€ä¹ˆï¼Ÿ

ä½¿ç”¨ mypy çš„ä¸»è¦åŸå› æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š

- **æé«˜ä»£ç è´¨é‡ä¸å¯è¯»æ€§**ï¼šé€šè¿‡åœ¨ä»£ç ä¸­åŠ å…¥ç±»å‹æ³¨è§£ï¼Œå¯ä»¥ä½¿ä»£ç æ›´åŠ æ˜“è¯»ï¼Œæ˜ç¡®å˜é‡å’Œå‡½æ•°çš„é¢„æœŸç±»å‹ï¼Œä»è€Œå‡å°‘ç†è§£å’Œç»´æŠ¤ä»£ç æ‰€éœ€çš„æ—¶é—´ã€‚
- **æ•è·æ½œåœ¨é”™è¯¯**ï¼šmypy å¯ä»¥åœ¨ä»£ç è¿è¡Œå‰å‘ç°ç±»å‹é”™è¯¯ï¼Œé¿å…è¿è¡Œæ—¶æ‰å‘ç°çš„é—®é¢˜ï¼Œä»è€Œå‡å°‘è°ƒè¯•æ—¶é—´ã€‚
- **æ–‡æ¡£åŒ–ä½œç”¨**ï¼šç±»å‹æ³¨è§£å¯ä»¥ä½œä¸ºä»£ç çš„ä¸€éƒ¨åˆ†ï¼Œæœ‰åŠ©äºè‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£å’Œè¾…åŠ©å¼€å‘è€…ç†è§£ä»£ç ã€‚

3ã€å…·ä½“æ€ä¹ˆåšï¼Ÿ

3.1ã€å®‰è£… mypy

é¦–å…ˆï¼Œä½ éœ€è¦å®‰è£… mypyï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ pip å‘½ä»¤ï¼š

```bash
pip install mypy
```

3.2ã€æ·»åŠ ç±»å‹æ³¨é‡Š

åœ¨ä»£ç ä¸­æ·»åŠ ç±»å‹æ³¨é‡Šï¼Œå¯ä»¥ä½¿ç”¨ Python æä¾›çš„ `typing` æ¨¡å—ã€‚ä¾‹å¦‚ï¼š

```bash
from typing import List, Tuple

def add_numbers(x: int, y: int) -> int:
    return x + y

def process_data(data: List[Tuple[str, int]]) -> None:
    for name, age in data:
        print(f"Name: {name}, Age: {age}")

data_list = [("Alice", 25), ("Bob", 30), ("Charlie", 22)]
process_data(data_list)

```

3.3ã€è¿è¡Œ mypy

**åœ¨æ·»åŠ äº†ç±»å‹æ³¨é‡Šä¹‹åï¼Œå¯ä»¥ä½¿ç”¨ mypy æ¥è¿›è¡Œç±»å‹æ£€æŸ¥**ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
mypy your_code.py
```

å¦‚æœä»£ç ä¸­æœ‰ç±»å‹é”™è¯¯ï¼Œmypy ä¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼š

```bash
def add(x: int, y: int) -> int:
    return x + y

result = add(10, "20")  # é”™è¯¯ï¼šç¬¬äºŒä¸ªå‚æ•°åº”è¯¥æ˜¯ int ç±»å‹
```

è¿è¡Œ mypy åï¼Œä¼šæç¤ºç±»ä¼¼è¿™æ ·çš„é”™è¯¯ä¿¡æ¯ï¼š

```
error: Argument 2 to "add" has incompatible type "str"; expected "int"
```

3.4ã€é…ç½® mypy

ä½ è¿˜å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶æ¥å®šåˆ¶ mypy çš„è¡Œä¸ºã€‚åˆ›å»ºä¸€ä¸ª mypy é…ç½®æ–‡ä»¶ï¼ˆä¾‹å¦‚ `mypy.ini`ï¼‰ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

```
[mypy]
python_version = 3.8
warn_return_any = True
warn_unused_ignores = True
```

ä½¿ç”¨é…ç½®æ–‡ä»¶è¿è¡Œ mypyï¼š

```
mypy --config-file mypy.ini your_code.py
```

é€šè¿‡è¿™äº›æ­¥éª¤ï¼Œå¼€å‘è€…å¯ä»¥é€æ­¥å°† mypy é›†æˆåˆ°ç°æœ‰çš„é¡¹ç›®ä¸­ï¼Œé€æ­¥ä¸ºä»£ç æ·»åŠ ç±»å‹æ³¨é‡Šï¼Œæå‡ä»£ç çš„è´¨é‡å’Œå¯ç»´æŠ¤æ€§ã€‚

4ã€æ€»ç»“

mypy æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œé€šè¿‡åœ¨ Python ä»£ç ä¸­å¼•å…¥ç±»å‹æ³¨è§£ï¼Œå¸®åŠ©å¼€å‘è€…åœ¨ç¼–å†™ä»£ç æ—¶å‘ç°æ½œåœ¨çš„ç±»å‹é”™è¯¯ï¼Œæå‡ä»£ç çš„è´¨é‡å’Œå¯è¯»æ€§ã€‚é€šè¿‡ç®€å•çš„å®‰è£…ã€ç±»å‹æ³¨é‡Šä»¥åŠè¿è¡Œ mypy è¿›è¡Œæ£€æŸ¥ï¼Œå¯ä»¥æ˜¾è‘—æé«˜å¼€å‘æ•ˆç‡å¹¶å‡å°‘é”™è¯¯å‘ç”Ÿã€‚

- [Python å­—ç¬¦ä¸²åº”è¯¥ç”¨åŒå¼•å·è¿˜æ˜¯å•å¼•å·ï¼Ÿ](https://mp.weixin.qq.com/s/l2zMScNxyXEFOI-tWilVlw)
- [åœ¨ VSCode ä¸­ç¼–å†™ Python ä»£ç ï¼Œä»£ç è§„èŒƒå·¥å…·ä»‹ç»ä¸æ¨è](https://mp.weixin.qq.com/s/5HDJXEFn3adwS1-y7zLjAg)
- [Python ä¸­ 20 ä¸ªæé«˜ä»£ç è´¨é‡çš„æµ‹è¯•å·¥å…·](https://mp.weixin.qq.com/s/yOcVF7luSsLV5gfsKyek1w)
- [Python å·¥ç¨‹çš„æœ€ä½³ä¼´ä¾£ï¼šisortã€flake8ã€black å’Œ mypy](https://mp.weixin.qq.com/s/oYPT9xWpg2DIuGamTopcgg)
- [PEP 8 â€“ Style Guide for Python Code](https://peps.python.org/pep-0008/)
- [Google Python é£æ ¼æŒ‡å— - å†…å®¹ç›®å½•](https://zh-google-styleguide.readthedocs.io/en/latest/google-python-styleguide/contents.html)

## share [ğŸ”](#weekly-100)

[readme](../README.md) | [previous](202501W5.md) | [next](202502W2.md)
