> @Author  : Lewis Tian (taseikyo@gmail.com)
>
> @Link    : github.com/taseikyo
>
> @Range   : 2021-08-15 - 2021-08-21

# Weekly #42

[readme](../README.md) | [previous](202108W2.md) | [next](202108W4.md)

## Table of Contents

- [algorithm](#algorithm-)
- [review](#review-)
- [tip](#tip-)
    - golang map 引发的空指针（nil）panic 问题
- [share](#share-)

## algorithm [🔝](#weekly-42)

## review [🔝](#weekly-42)

## tip [🔝](#weekly-42)

### 1. golang map 引发的空指针（nil）panic 问题

这周遇到了这个问题，后来问同事解决了，果然还是对 golang 不熟悉，但是仔细分析一下，实际上我应该是能规避的，还是不够细致惹的祸。

问题还原：

```golang
var dict map[string]string

dict["key1"] = func()
```

这里实际上仅声明了一个 map，而未初始化，当往里面存值的时候就会发生空指针的 painc，这个问题就如同在 C 语言中，仅声明一个指针，而不分配内存，直接去往里面存值肯定会报错的啊，很简单的一个问题。


所以以后使用要么使用 make，要么使用花括号声明并初始化一个空 map。

> [map_nil_panic_solutions.go](../code/map_nil_panic_solutions.go)

```golang
var dict1 map[string]string
dict2 := map[string]string{}
dict3 := make(map[string]string)

// map[] map[] map[]
fmt.Println(dict1, dict2, dict3)
// true false false
fmt.Println(dict1 == nil, dict2 == nil, dict3 == nil)
// 0x0, 0xc000084150, 0xc000084180
fmt.Printf("%p, %p, %p\n", dict1, dict2, dict3)
```

## share [🔝](#weekly-42)

[readme](../README.md) | [previous](202108W2.md) | [next](202108W4.md)
