> @Author  : Lewis Tian (taseikyo@gmail.com)
>
> @Link    : github.com/taseikyo
>
> @Range   : 2024-12-15 - 2024-12-21

# Weekly #93

[readme](../README.md) | [previous](202412W2.md) | [next](202412W4.md)

![](../images/2024/12/vitolda-klein-buCxrpmH3FI-unsplash.jpg "Weekly #93")

\**Photo by [Vitolda Klein](https://unsplash.com/@little_klein) on [Unsplash](https://unsplash.com/photos/boy-in-gray-sweater-standing-on-green-grass-field-during-daytime-buCxrpmH3FI)*

## Table of Contents

- [algorithm](#algorithm-)
- [review](#review-)
- [tip](#tip-)
	- pythonçš„æ‰“åŒ…ç¥å™¨ï¼šNuitka
- [share](#share-)

## algorithm [ğŸ”](#weekly-93)

## review [ğŸ”](#weekly-93)

## tip [ğŸ”](#weekly-93)

### 1. [pythonçš„æ‰“åŒ…ç¥å™¨ï¼šNuitka](https://www.lixiaofei2yy.website/python%E7%9A%84%E6%89%93%E5%8C%85%E7%A5%9E%E5%99%A8nuitka)

#### ä¸€. pyinstallerå’ŒNuitkaä½¿ç”¨æ„Ÿå—

1.1 ä½¿ç”¨éœ€æ±‚

è¿™æ¬¡ä¹Ÿæ˜¯ç”±äºé¡¹ç›®éœ€è¦ï¼Œè¦å°†pythonçš„ä»£ç è½¬æˆexeçš„ç¨‹åºï¼Œåœ¨æ‰¾äº†è®¸ä¹…åï¼Œå‘ç°äº†2ä¸ªéƒ½èƒ½å¯¹pythoné¡¹ç›®æ‰“åŒ…çš„å·¥å…·â€”â€”pyintallerå’Œnuitkaã€‚

è¿™2ä¸ªå·¥å…·åŒæ—¶éƒ½èƒ½æ»¡è¶³é¡¹ç›®çš„éœ€è¦ï¼š

- éšè—æºç ã€‚è¿™é‡Œçš„pyinstalleræ˜¯é€šè¿‡è®¾ç½®keyæ¥å¯¹æºç è¿›è¡ŒåŠ å¯†çš„ï¼›è€Œnuitkaåˆ™æ˜¯å°†pythonæºç è½¬æˆC++ï¼ˆè¿™é‡Œå¾—åˆ°çš„æ˜¯äºŒè¿›åˆ¶çš„pydæ–‡ä»¶ï¼Œé˜²æ­¢äº†åç¼–è¯‘ï¼‰ï¼Œç„¶åå†ç¼–è¯‘æˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚
- æ–¹ä¾¿ç§»æ¤ã€‚ç”¨æˆ·ä½¿ç”¨æ–¹ä¾¿ï¼Œä¸ç”¨å†å®‰è£…ä»€ä¹ˆpythonå•Šï¼Œç¬¬ä¸‰æ–¹åŒ…ä¹‹ç±»çš„ã€‚

1.2 ä½¿ç”¨æ„Ÿå—

2ä¸ªå·¥å…·ä½¿ç”¨åçš„æœ€å¤§çš„æ„Ÿå—å°±æ˜¯ï¼š

- pyinstallerä½“éªŒå¾ˆå·®ï¼
	- ä¸€ä¸ªæ·±åº¦å­¦ä¹ çš„é¡¹ç›®æœ€åè½¬æˆçš„exeç«Ÿç„¶æœ‰è¿‘3ä¸ªGçš„å¤§å°ï¼ˆpyinstalleræ˜¯å°†æ•´ä¸ªè¿è¡Œç¯å¢ƒè¿›è¡Œæ‰“åŒ…ï¼‰ï¼Œå¯¹ï¼Œä½ æ²¡å¬é”™ï¼Œä¸€ä¸ªEXEæœ‰3ä¸ªGï¼
	- æ‰“åŒ…è¶…çº§æ…¢ï¼Œå¯åŠ¨è¶…çº§æ…¢ã€‚
- nuitkaçœŸé¦™ï¼
	- åŒä¸€ä¸ªé¡¹ç›®ï¼Œç”Ÿæˆçš„exeåªæœ‰7Mï¼
	- æ‰“åŒ…è¶…çº§å¿«ï¼ˆ1minä»¥å†…ï¼‰ï¼Œå¯åŠ¨è¶…çº§å¿«ã€‚

#### äºŒ. Nuitkaçš„å®‰è£…åŠä½¿ç”¨

2.1 nuitkaçš„å®‰è£…

- ç›´æ¥åˆ©ç”¨pipå³å¯å®‰è£…ï¼š`pip install Nuitka`
- ä¸‹è½½vs2019(MSVS)æˆ–è€…MinGW64ï¼Œåæ­£éƒ½æ˜¯C++çš„ç¼–è¯‘å™¨ï¼Œéšä¾¿ä¸‹ã€‚

2.2 ä½¿ç”¨è¿‡ç¨‹

å¯¹äºç¬¬ä¸‰æ–¹ä¾èµ–åŒ…è¾ƒå¤šçš„é¡¹ç›®ï¼ˆæ¯”å¦‚éœ€è¦ import torch,tensorflow,cv2,numpy,pandas,geopy ç­‰ç­‰ï¼‰è€Œè¨€ï¼Œè¿™é‡Œæœ€å¥½æ‰“åŒ…çš„æ–¹å¼æ˜¯åªå°†å±äºè‡ªå·±çš„ä»£ç è½¬æˆ C++ï¼Œä¸ç®¡è¿™äº›å¤§å‹çš„ç¬¬ä¸‰æ–¹åŒ…ï¼

ä»¥ä¸‹æ˜¯æˆ‘ demo çš„ä¸€ä¸ªç›®å½•ç»“æ„ï¼ˆè¿™é‡Œä½¿ç”¨äº† pytq5 æ¡†æ¶å†™çš„ç•Œé¢ï¼‰ï¼š

```BASH
â”œâ”€utils //æºç 1æ–‡ä»¶å¤¹
â”œâ”€src // æºç 2æ–‡ä»¶å¤¹
â”œâ”€logo.ico // demoçš„å›¾æ ‡
â””â”€demo.py // mainæ–‡ä»¶
```

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼ˆè°ƒè¯•ï¼‰ç›´æ¥ç”Ÿæˆ exe æ–‡ä»¶ï¼š

```BASH
nuitka --standalone --show-memory --show-progress --nofollow-imports 
	--plugin-enable=qt-plugins --follow-import-to=utils,src 
	--output-dir=out --windows-icon-from-ico=./logo.ico demo.py
```

è¿™é‡Œç®€å•ä»‹ç»ä¸‹æˆ‘ä¸Šé¢çš„ nuitka çš„å‘½ä»¤ï¼š

- `--standalone`ï¼šæ–¹ä¾¿ç§»æ¤åˆ°å…¶ä»–æœºå™¨ï¼Œä¸ç”¨å†å®‰è£… python
- `--show-memory --show-progress`ï¼šå±•ç¤ºæ•´ä¸ªå®‰è£…çš„è¿›åº¦è¿‡ç¨‹
- `--nofollow-imports`ï¼šä¸ç¼–è¯‘ä»£ç ä¸­æ‰€æœ‰çš„ importï¼Œæ¯”å¦‚ kerasï¼Œnumpy ä¹‹ç±»çš„ã€‚
- `--plugin-enable=qt-plugins`ï¼šæˆ‘è¿™é‡Œç”¨åˆ° pyqt5 æ¥åšç•Œé¢çš„ï¼Œè¿™é‡Œ nuitka æœ‰å…¶å¯¹åº”çš„æ’ä»¶ã€‚
- `--follow-import-to=utils,src`ï¼šéœ€è¦ç¼–è¯‘æˆ C++ ä»£ç çš„æŒ‡å®šçš„ 2 ä¸ªåŒ…å«æºç çš„æ–‡ä»¶å¤¹ï¼Œè¿™é‡Œç”¨,æ¥è¿›è¡Œåˆ†éš”ã€‚
- `--output-dir=out`ï¼šæŒ‡å®šè¾“å‡ºçš„ç»“æœè·¯å¾„ä¸º outã€‚
- `--windows-icon-from-ico=./logo.ico`ï¼šæŒ‡å®šç”Ÿæˆçš„ exe çš„å›¾æ ‡ä¸º logo.ico è¿™ä¸ªå›¾æ ‡ï¼Œè¿™é‡Œæ¨èä¸€ä¸ªå°†å›¾ç‰‡è½¬æˆ ico æ ¼å¼æ–‡ä»¶çš„ç½‘ç«™ï¼ˆæ¯”ç‰¹è™«ï¼‰ã€‚
- `--windows-disable-console`ï¼šè¿è¡Œ exe å–æ¶ˆå¼¹æ¡†ã€‚è¿™é‡Œæ²¡æœ‰æ”¾ä¸Šå»æ˜¯å› ä¸ºæˆ‘ä»¬è¿˜éœ€è¦è°ƒè¯•ï¼Œå¯èƒ½å“ªé‡Œè¿˜æœ‰é—®é¢˜ä¹‹ç±»çš„ã€‚

ç»è¿‡ 1min çš„ç¼–è¯‘ä¹‹åï¼Œä½ å°±èƒ½åœ¨ä½ çš„ç›®å½•ä¸‹çœ‹åˆ°ï¼š

```bash
â”œâ”€utils //æºç 1æ–‡ä»¶å¤¹
â”œâ”€src // æºç 2æ–‡ä»¶å¤¹
â”œâ”€out // ç”Ÿæˆçš„exeæ–‡ä»¶å¤¹
    â”œâ”€demo.build 
    â””â”€demo.dist
		â””â”€demo.exe // ç”Ÿæˆçš„exeæ–‡ä»¶
â”œâ”€logo.ico // demoçš„å›¾æ ‡
â””â”€demo.py // mainæ–‡ä»¶
```

å½“ç„¶è¿™é‡Œä½ ä¼šå‘ç°çœŸæ­£è¿è¡Œ exe çš„æ—¶å€™ï¼Œä¼šæŠ¥é”™ï¼š`no module named torch,cv2,tensorflow` ç­‰ç­‰è¿™äº›æ²¡æœ‰è½¬æˆ C++ çš„ç¬¬ä¸‰æ–¹åŒ…ã€‚

è¿™é‡Œéœ€è¦æ‰¾åˆ°è¿™äº›åŒ…ï¼ˆæˆ‘çš„æ˜¯åœ¨ `software\python3.7\Lib\site-packages` ä¸‹ï¼‰å¤åˆ¶ï¼ˆæ¯”å¦‚ numpy,cv2 è¿™ä¸ªæ–‡ä»¶å¤¹ï¼‰åˆ° demo.dist è·¯å¾„ä¸‹ã€‚

è‡³æ­¤ï¼Œexe èƒ½å®Œç¾è¿è¡Œå•¦ï¼

## share [ğŸ”](#weekly-93)

[readme](../README.md) | [previous](202412W2.md) | [next](202412W4.md)
